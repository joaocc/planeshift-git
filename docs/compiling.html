<head>

<title>PlaneShift Compiling Guide</title>
<meta name="copyright" content="&copy; 2008 Atomic Blue">
<meta http-equiv="content-type" content="text/html">

<script type="text/javascript">
<!--
    // Source versions are listed here and automatically updated in the body.
    // Standard revisions (CSrev) are the ones that are compatible with Laanx.
    // An additional CS revision (CSrev_HEAD) may be specified for the latest version of PS.
    var CSrev = "30956";  // CS_SOURCE_REV
    var CAL3Drev = "493"; // CAL3D_SOURCE_REV
    var CSrev_HEAD = "30956";  // CS_SOURCE_REV_HEAD
    var CAL3Drev_HEAD = "493"; // CAL3D_SOURCE_REV_HEAD
    var csWinLibsVersionStab = "1.3_004"; // cs win32 libs version.
    var csWinLibsVersion = "1.3_004"; // cs win32 libs version.
    //Update date and author, to be changed everytime and updates occurred
    var UpdateDate = "25 Aug 2008"; //Date when the update occurred
    var UpdateAuthor = "Mike Gist"; //Author of the update
-->
</script>

<!--
How to edit this guide:
    Standard HTML and CSS may be used as needed. Don't, under any circumstances, edit this
    with a WYSIWYG! 

    Please keep commands in boxes to make them stand out more easily:
    <p><i class="command">text</i></p>  or  <p><div class="commandBox">text<br>text</div></p>
    
    Source dates/revisions compatible with Laanx should be specified in the body as:
    PS_SOURCE_DATE or CS_SOURCE_REV
    The CS SVN revisions required for latest PS are specified by:
    CS_SOURCE_REV_HEAD
    Update and author date should be specified instead as:
    UPDATE_DATE and UPDATE_AUTHOR
    
    Portions which only apply to specific operating systems or compilers should be enclosed in:
    <div class=name>section</div>  or  <span class=name>section</span>

    Based on the reader's selections, only those that apply will be shown.  Feel free to nest them
    if needed. Selections named as "set"-"subset" will show both "set" and "subset" when selected.

    About the Linux-Generic (when user selects Linux) versus the Linux class:
    Linux-Generic will display everything in the Linux and Linux-Generic classes.
    Linux only shows the items in the Linux class.

How to add a new selection:
    1) Add a CSS class below under the desired heading using "display: none".
    2) Add an option to the menu at the begining of the body.
    3) Use this new class name in a div within the body, and it will show when selected.
-->

<style type="text/css">
<!--

/* operating systems */
.Linux           { display: block; }
.Linux-Generic   { display: block; }
.Linux-Debian    { display: none; }
.Linux-Gentoo    { display: none; }
.Linux-Slackware { display: none; }
.Linux-Ubuntu    { display: none; }
.Windows         { display: none; }
.MacOSX          { display: none; }

/* compilers */
.GCC   { display: block; }
.MSVC  { display: none; }
.MINGW { display: none; }

/* User/Developer */
.User { display: block; }
.Developer { display: none; }

/* Normal/Static */
.Normal { display: block; }
.Static { display: none; }


/*------------------------------------------------------------*/

/* formatting styles */

.command, .commandBox
{
    font-style: italic;
    color: #000033;
    background-color: #cccccc;
    padding: 3px 6px 3px 6px;
    border: 1px solid black;
}
.commandBox { display: table; }  /* shrink-to-fit (doesn't work in IE) */

h2, h3
{
    margin: 0;
    padding-top: .5em;
    padding-bottom: .15em;
    border-bottom: solid #aaaaaa;
}
h2 { border-width: 2px; }
h3 { border-width: 1px; margin-right: 75%; }

table
{
    color: #000033;
    border-collapse: collapse;
    background-color: #eeeeee;
}
th, td
{
    text-align: center;
    padding: 2px 5px 2px 5px;
    border: 1px solid black;
}
th { font-weight: bold; background-color: #dddddd; }

-->
</style>

<script type="text/javascript">
<!--

// Current selections
var operatingsystem = "Linux";
var compiler = "GCC";
var userdeveloper = "User";
var staticnorm = "Normal";

// Sets 'elementName' for all 'tagName' with 'className' to 'value'
function SetProperty(tagName,className,elementName,value)
{
    var elements = document.getElementsByTagName(tagName);
    for (var i=0; i < elements.length; i++)
        if (elements[i].className && elements[i].className == className)
            elements[i].style[elementName] = value;
}

function SetVisibility(set,state)
{
    // Set the display attribute for all divs of the given class
    SetProperty("div", set, "display", state?"block":"none");

    // Set the display attribute for all spans of the given class
    SetProperty("span", set, "display", state?"block":"none");

    // Also apply visibility to the general group
    var group = set.substring(0,set.indexOf('-'));
    if (group != set)
        SetVisibility(group,state);
}

function ShowSet(category,set)
{
    if (category == "OS")
    {
        SetVisibility(operatingsystem,false);
        operatingsystem = set;
	
	  if (operatingsystem == "Windows" && compiler == "GCC")
		SelectOption("Compiler","MSVC");
        else if ((compiler == "MSVC" || compiler == "MINGW")&& operatingsystem != "Windows")
            SelectOption("Compiler","GCC");
    }
    else if (category == "Compiler")
    {
        SetVisibility(compiler,false);
        compiler = set;
        
	  if (operatingsystem == "Windows" && compiler == "GCC")
		SelectOption("OS","Linux-Generic");
        else if ((compiler == "MSVC" || compiler == "MINGW") && operatingsystem != "Windows")
            SelectOption("OS","Windows");
    }
    else if (category == "UserDeveloper")
    {
        SetVisibility(userdeveloper,false);
        userdeveloper = set;
    }
    else if (category == "StaticNorm")
    {
        SetVisibility(staticnorm,false);
        staticnorm = set;
    }

    SetVisibility(set,true);
}

function SelectOption(category,option)
{
    var list;

    if (category == "OS")
        list = document.menu.OSes;
    else if (category == "Compiler")
        list = document.menu.Compilers;
    else if (category == "UserDeveloper")
        list = document.menu.UserDevelopers;
    else if (category == "StaticNorm")
        list = document.menu.StaticNorm;
        
    for (var i=0; i < list.options.length; i++)
        if (list.options[i].value == option)
            list.options[i].selected = true;
            
    ShowSet(category,option);
}

function Initialize()
{
    // Set the default selections
    SelectOption("OS","Linux-Generic");
    SelectOption("Compiler","GCC");
    SelectOption("UserDeveloper","User");
    SelectOption("StaticNorm","Normal");
    
    // Set the listed build dates
    document.body.innerHTML = document.body.innerHTML.
                              replace(/CAL3D_SOURCE_REV_HEAD/g, CAL3Drev_HEAD).
                              replace(/CS_SOURCE_REV_HEAD/g, CSrev_HEAD).
                              replace(/CAL3D_SOURCE_REV/g, CAL3Drev).
                              replace(/CS_SOURCE_REV/g, CSrev).
					replace(/UPDATE_DATE/g, UpdateDate).
                              replace(/LIBS_VER_STAB/g, csWinLibsVersionStab).
                              replace(/LIBS_VER/g, csWinLibsVersion).
			            replace(/UPDATE_AUTHOR/g, UpdateAuthor);

    // Hide the second CS date if we don't need it
    if (CSrev_HEAD == CSrev)
        document.getElementById("forked").style.display = "none";
}

// -->
</script>

</head>
<body onLoad="Initialize()">

<h1><a name="top">PlaneShift Compiling Guide</a></h1>

<p> <!-- system menu -->
<b>Select your OS, compiler, target (laanx compatible or developer), and build type:</b>
<form name="menu">
    <select onChange="ShowSet('OS',this.options[this.selectedIndex].value)" name="OSes">
        <option value="Linux-Generic" selected>Linux</option>
        <option value="Linux-Debian">Debian Linux</option>
        <option value="Linux-Gentoo">Gentoo Linux</option>
        <option value="Linux-Slackware">Slackware Linux</option>
        <option value="Linux-Ubuntu">Ubuntu Linux</option>
        <option value="Windows">Windows</option>
        <option value="MacOSX">Mac OSX</option>
    </select>
    <select onChange="ShowSet('Compiler',this.options[this.selectedIndex].value)" name="Compilers">
        <option value="GCC" selected>GCC</option>
        <option value="MSVC">MSVC</option>
	  <option value="MINGW">MINGW</option>
    </select>
    <select onChange="ShowSet('UserDeveloper',this.options[this.selectedIndex].value)" name="UserDevelopers">
        <option value="User" selected>User</option>
        <option value="Developer">Developer</option>
    </select>
    <select onChange="ShowSet('StaticNorm',this.options[this.selectedIndex].value)" name="StaticNorm">
        <option value="Normal" selected>Normal</option>
        <option value="Static">Static</option>
    </select>
</form>
</p>

<noscript>
    <p><i>
        <b><font color=red>JavaScript must be enabled to fully view this guide!</font></b><br>
        With JavaScript off, you cannot show/hide the different system-specific sections or see the current source revisions.
    </i></p>
</noscript>

<b>Building PS:</b> <!-- section menu -->
<p style="{ margin-left: 15px; margin-top: 0; }">
    <a href="#dates">Source Revisions</a><br>
    <a href="#dir">Working Directory</a><br>
    <a href="#tools">Install Tools</a><br>
    <a href="#download">Download Sources</a><br>
    <a href="#compile">Compile Sources</a><br>
    <a href="#server">Setup Server</a> <i>(optional)</i><br>
    <span class="Linux"><a href="#scripts">Mini Scripts</a> <i>(optional)</i><br></span>
    <a href="#mounts">Mounting External Art</a> <i>(optional)</i><br>
    <a href="#help">Getting Help</a>
</p>

<p> <!-- intros -->
    <div class="Windows">
        <div class="MINGW">
            <a href="http://www.mingw.org/">MinGW32</a> is a free, open source compiler with an
            associated toolset that can be used for compiling Win32 executables. In conjunction
            with other free or open source software the majority of PlaneShift can be compiled
            under Windows without having to purchase any compiler or other licenses.<br><br>
		<b>Credits</b><br>
		Arianna Benigno, maintained the guide;<br>
		Rolenun, adjuster for good part of the content;<br>
		Dave Garrett, author of the new compiling guides layout;<br>
		Steve Cook, author of the guide to compiling with Mingw32.<br>		
        </div>
        <div class="MSVC">
 		This guide lists the steps necessary to download all the tools and compile PlaneShift.
            This guide assumes that Visual C++.NET or Visual Studio.NET is installed. Some tools
            need glut, Directx 9 SDK, and python. These features are not needed so they won't be
            covered here. As a result there will be some compilation errors due to missing files.<br><br>
		<b>Credits</b><br>
		Arianna Benigno, maintained the guide;<br>
		Rolenun, adjuster for good part of the content;<br>
		Dave Garrett, author of the new compiling guides layout;<br>
		Chris Ayers, author of the first guide for MSVC;<br>
		Steve Cook, author of the guide to compiling with Mingw32, on which the first MSVC guide was based.<br>
        </div>
    </div>
    <div class="Linux">
        This guide gives a fairly detailed description on how to get a working client up and
        running in Linux. It gives instructions on how to get all the required tools and how
        to check out the source code and configure it. At the end there you will have a
        PlaneShift client and a PlaneShift updater application, and if you want also the server.<br><br>
	  <b>Credits</b><br>
	  Arianna Benigno, maintained the guide;<br>
	  Dave Garrett, author of the new compiling guides layout;<br>
	  Andrew Craig, author of the first Linux guides that were available on <a href="http://laanx.fragnetics.com">Laanx website</a>;<br>
	  Platyna, author of the first compiling guide for Slackware distribution.<br>
        Mike Gist, author of the static compiling guide.<br>
</div>
    <div class="MacOSX">
        This guide gives a very basic description on how to get a working client up and
        running on an Intel Mac. It gives instructions on how to get to check out the source code and configure it. At the end there you will have a
        PlaneShift client and a PlaneShift updater application, and if you want also the server.<br><br>
	  <b>Credits</b><br>
       Caarrie, Author of the first basic Mac guide with help from the <a href="http://vaalnor.mine.nu/psdoc/?q=node/38">PSDocs</a> guide and Trymm

    </div>
    <div class="MacOSX">
    <p>Here is a basic Mac guide based on the linux guide, for more specifics refer to <a href="http://vaalnor.mine.nu/psdoc/?q=node/38">PSDocs</a>, a user maintained guide.</p>
            <div class="Static">There is no Mac static build guide at this time</div>
    </div>
</p>

<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<p> 
    <h3><a name="dates">Last Update<a></h3>
    This guide has been update by UPDATE_AUTHOR, the UPDATE_DATE.
<p>
    <h3>Source Dates:</h3>
    <i>Make sure you get the correct dates required for the version of PS you are building.<br>
    Note that different versions of PS require different CS and PS revisions.<br>
    after those listed here may not be compatible with the public server.</i>

    <div class="User">
    <p>
        Currently compatible with Laanx:<br>
        <b>CAL3D SVN revision:</b> CAL3D_SOURCE_REV <br>
        <b>CS 1.4 SVN revision:</b> CS_SOURCE_REV <br>
    </p>
    </div>
    <div class="Developer">
    <p>
        Currently compatible with trunk of PS:<br>
        <b>CAL3D SVN revision:</b> CAL3D_SOURCE_REV_HEAD <br>
        <b>CS SVN revision:</b> CS_SOURCE_REV_HEAD <br>
    </p>
    </div>
</p>

<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<h2><a name="dir">Set Working Directory</a></h2>
    The first step is to create your development directory. If you  want to choose a specific directory, you can do that, 
    however this guide will assume you use: 

<div class="Linux">
    <p><i class="command">/home/user/development/</i></p>
    Many people get confused here because they copy and paste commands which contain this path. User generally refers to your username.  The above path is only useable if you create it manually.  
</div>
<div class="Windows">
    <p><i class="command">C:\development\</i></p>
</div>
<div class="MacOSX">
    <p><i class="command">$HOME/development</i></p>
</div>

<div class="Windows"><div class="MINGW">
    Note that in MinGW/MSYS paths are written as follows:
    <p><i class="command">/c/development/</i></p>
</div></div>

<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<h2><a name="tools">Install Tools</a></h2>
<div class="Windows">
    <div class="MSVC">
        <h3>Platform SDK for MSVC 8</h3>

        <p>This step is necessary if you are using VC8 Express Edition.
        You should download and install the Platform SDK from this location:<br>
        <a href="http://msdn.microsoft.com/vstudio/express/visualc/usingpsdk/">http://msdn.microsoft.com/vstudio/express/visualc/usingpsdk/</a><br>
        Remember to follow all the listed steps to get things working: this includes to update the directories for Visual C++ and 
        edit corewin_express.vsprops as indicated.</p>
        
        <h3>MSVC 8 Full Edition</h3>
        <p>If you are using this version of the build environment, you need to update it with the Service Pack 1!</p>
    </div>
    <div class="MINGW">
        <h3>MinGW32 and MSYS</h3>
        <p>The MinGW package contains the compiler, header and lib files.<br>
           The MSYS package contains the shell and make utility.<br>
           The MSYSDTK package contains autoconf, automake, libtool, autogen, guile, SVN, 
           openssl, openssh, inetutils, perl and vim.<br>
           Because autoconf and automake will be outdated, we will manually update them.<br>
           Also, With MinGW version 4.1.0.0, some of the BinUtils included are broken by default so we're fixing that.<br><br>

           First, we'll get MinGW and a few necessary dependencies.<br>
           Note: These are the minimum required packages for the MinGW build.<br>
           Go here: <a href="http://prdownloads.sourceforge.net/mingw/">http://prdownloads.sourceforge.net/mingw/</a> and fetch:<br><br>
           MinGW [bin] MinGW-5.1.4.exe<br>
           MSYS [bin] MSYS-1.0.10.exe<br>
           MSYS DTK [bin] msysDTK-1.0.1.exe<br>
           GDB [bin] gdb-5.2.1-1.exe (Optional)<br>
           MSYS Autoconf [bin] msys-autoconf-2.59.tar.bz2<br>
           MSYS Automake [bin] msys-automake-1.8.2.tar.bz2<br>
           BinUtils [bin] binutils-2.17.50-20060824-1.tar.gz<br><br>

           Run the exe	files in the order they were downloaded to install the compiler. Select 'Full' type for the MinGW installation.<br>
           The installation program should also add an icon for MSYS to your start menu. <br>
           Click the "MSYS" icon and it should open up a shell window. Type "exit" to close the shell window again.<br><br>

           Unzip the conf/make utilities in c:\msys\1.0\, then unzip the BinUtils to the c:\mingw directory as follows:<br>
Unzipping the tar.bz2 archives needs to be done through the MSYS
command-line by changing directory with the cd command to where you
downloaded the files. Then, run the following commands:
<div class="commandBox">tar -xjf msys-autoconf-2.59.tar.bz2 -C /c/msys/1.0<br>
tar -xjf msys-automake-1.8.2.tar.bz2 -C /c/msys/1.0<br>
tar -xzf binutils-2.17.50-20060824-1.tar.gz -C /c/MinGW</div><br>
           This allows MSYS to setup the MinGW paths correctly.<br>

           Download the following dependencies from the same site, but do not install these yet. Their install instructions are included below.<br>
           From explorer, create and place these dependencies into C:\msys\1.0\src. Also, create the C:\msys\1.0\local directory.<br><br>

           freetype-2.1.9-mingwPORT.tar.bz2 <br>
           jpeg-6b-mingwPORT.tar.bz2<br>
           zlib-1.2.3-mingwPORT-1.tar.bz2<br>
           wget-1.9.1-mingwPORT.tar.bz2<br>
       </p>
        The following dependencies use a scripted system to download and install them, built into their files.<br>
        For the unanswered questions below, just press enter to accept the default (in parentheses).<br>
        The following commands are to be run in the MSYS shell.<br><br>
        <b>Installing wget</b>
        <p> The input listed by the mingwPORT.sh script assumes that there is a file
called wget-1.9.1.tar.gz in /usr/src, but the file you do have is
wget-1.9.1-mingwPORT.tar.bz2.<br>

There seems to be two solutions to this problem, you can choose the one your prefer the most:<br>

1)Download the file from
<a href="ftp://ftp.gnu.org/gnu/wget/wget-1.9.1.tar.gz">here</a> and put it in
/usr/src before running the mingwPORT.sh script<br>

2)Just copy the prebuilt wget instead of compiling it instead of
typing "mingwPORT.sh" (see the command list below) to run the script type "cp wget.exe /mingw/bin" and then
continue as indicated.<br></p>


        <p><div class="commandBox">
            $ cd /usr/src<br>
            $ tar -jxvf wget-1.9.1-mingwPORT.tar.bz2<br>
            $ cd wget-1.9.1/mingwPORT<br>
            $ ./mingwPORT.sh<br>
            Download file? (Yes) No<br>
            Unarchive file? (Yes)<br>
            Archive file type? (tar.gz) <br>
            Archive file? (wget-1.9.1.tar.gz) <br>
            Archive file path? (/tmp) /usr/src<br>
            Source path? (/usr/src/wget-1.9.1) <br>
            Installation directory? (/mingw) <br>
            CFLAGS (-O3 -s -mms-bitfields -march=i686) <br>
         </div></p>
         <b>Installing zlib</b>
         <p><div class="commandBox">
             $ cd /usr/src<br>
             $ tar -jxvf zlib-1.2.3-mingwPORT-1.tar.bz2 <br>
             $ cd zlib-1.2.3/mingwPORT<br>
             $ ./mingwPORT.sh<br>
             Download file? (Yes) <br>
             Download file URI? (http://www.zlib.net) <br>
             Archive file type?<br>
             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0) unknown<br>
             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1) tar.gz<br>
             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2) tgz<br>
             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3) tar.bz2<br>
             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4) tbz2<br>
             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5) zip<br>
             Select a numeric value: (3) <br>
             Archive file? (zlib-1.2.3.tar.bz2) <br>
             Download to path? (/tmp) /usr/src<br>
             Source path? (/usr/src/zlib-1.2.3) <br>
             Installation directory? (/mingw) <br>
             CFLAGS (-O3 -s -mms-bitfields -march=i686) <br>
         </div></p>
         <b>Installing JPEG Support</b>
         <p><div class="commandBox">
         $ cd /usr/src<br>
         $ tar -jxvf jpeg-6b-mingwPORT.tar.bz2 <br>
         $ cd jpeg-6b/mingwPORT<br>
         $ ./mingwPORT.sh<br>
         Download file? (Yes) <br>
         Download file URI? (ftp://ftp.uu.net/graphics/jpeg) <br>
         Archive file type?<br>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0) unknown<br>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1) tar.gz<br>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2) tgz<br>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3) tar.bz2<br>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4) tbz2<br>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5) zip<br>
         Select a numeric value: (1) <br>
         Archive file? (jpegsrc.v6b.tar.gz) <br>
         Download to path? (/tmp) /usr/src<br>
         Source path? (/usr/src/jpeg-6b) <br>
         Installation directory? (/mingw) <br>
         CFLAGS (-O3 -s -mms-bitfields -march=i686) <br>
         </div></p>
         <b>Installing LibPNG Support</b><br>
         Go to <a href="http://sourceforge.net/projects/libpng/">LibPNG's homepage</a> to get the latest source distribution.<br>
         We'll be using libpng-1.2.29.tar.bz2<br>
         Do not use the mingwPORT file. It is very outdated and no longer works.<br>
         Put this file in the /usr/src directory as well.
         <p><div class="commandBox">
         $ cd /usr/src<br>
         $ tar -jxvf libpng-1.2.29.tar.bz2 <br>
         $ cd libpng-1.2.29<br>
         $ ./configure<br>
         $ make<br>
         $ make install<br>
         </div></p>
         <b>Installing FreeType2 Support</b>
         <p><div class="commandBox">
         $ cd /usr/src<br>
         $ tar -jxvf freetype-2.1.9-mingwPORT.tar.bz2<br>
         $ cd freetype-2.1.9/mingwPORT<br>
         $ ./mingwPORT.sh<br>
         Download file? (Yes) <br>
         SF Mirror (Yes) <br>
         Which mirror from the list do you wish to use?<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0) none (Oops, I wish to cancel)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1) jaist    (JP)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2) puzzle   (CH)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3) nchc     (TW)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4) easynews (US)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5) ovh      (FR)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6) belnet   (BE)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7) citkit   (RU)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8) cogent   (US)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9) voxel    (US)<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10) kent     (UK)<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11) heanet   (IE)<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12) switch   (CH)<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13) mesh     (DE)<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14) optusnet (AU)<br>
        Select a numeric value: (0) 4<br>
        Archive file type?<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0) unknown<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1) tar.gz<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2) tgz<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3) tar.bz2<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4) tbz2<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5) zip<br>
        Select a numeric value: (3) 3<br>
        Archive file? (freetype-2.1.9.tar.bz2) <br>
        Download to path? (/tmp) /usr/src<br>
        Source path? (/usr/src/freetype-2.1.9) <br>
        Installation directory? (/mingw) <br>
        CFLAGS (-O3 -s -mms-bitfields -march=i686) <br>
        </div></p>
    </div>

    

    <h3>Set Environment Variables</h3>
    <p>Right-Click My Computer on your desktop and choose Properties. Under Advanced choose Environmental Variables.
    Click New under either User or System variables depending on how you want it setup. If you choose System, you will have
    to log off to make the changes.</p>

    <p><i>Variable Name</i>: CRYSTAL (all caps)<br>
    <i>Variable Value</i>: C:\development\cs</p>

    <div class="MINGW">
        <p>Before compiling each time in MinGW, you will also need to enter at the MSYS prompt:</p>
        <p><div class="commandBox">
            export CRYSTAL=/c/development/cs<br>
        </div></p>
    </div>
</div>

<div class="Linux-Generic">
    <h3>Jam</h3>
    <p>You will need a tool called Jam. Jam is a replacement for make. It's a bit easier to maintain and create
    custom builds. If you do not already have Jam, you can find it at <a href="ftp://ftp.perforce.com/pub/jam/">ftp://ftp.perforce.com/pub/jam/</a> - install it system wide. You can also use your distro's package manager to install it.</p>
    <h3>SVN</h3>
    <p>CS and PlaneShift use SVN for their source repositories, so you'll need that too.<br>
       You can find the software at: <a href="http://subversion.tigris.org/">http://subversion.tigris.org/</a><br>
       A GUI is available at: <a href="http://esvn.umputun.com/">http://esvn.umputun.com/</a> You can also use your distro's package manger to install it.</p>
</div>

<div class="Windows">
    <h3>SVN client</h3>
    <p>PS and CS use SVN for their source repositories, so you will need an SVN client.<br>
       The SVN client for Windows is <a href="http://tortoisesvn.tigris.org/">TortoiseSVN</a>.</p>
</div>
<div class="Linux-Gentoo">
    <p>Note: This section is incomplete and untested, but contains the Gentoo specific build information that was previously in the manual.</p>
    <p>Due to the number of dependencies needed, if you wish to read the homepage listing, or dependency description please select Linux's generic dropdown selection.</p>
    <p>via portage: <i class="command">#emerge jam</i></p>
</div>
<div class="Linux-Slackware">
    <p>Note: This section is incomplete and untested, but contains the Slackware specific build information that was previously in the manual.</p>
    <p>Due to the number of dependencies needed, if you wish to read the homepage listing, or dependency description please select Linux's generic dropdown selection.</p>
<strong> BOTH of these above commands are assuming you do not need a server, if you do please follow directions in the <a href="#mysql">mysql</a> section for installing other required packages before moving on to building to save you time.</strong>
</div>
<div class="Linux-Ubuntu">
    <p>The instructions here are tested using Ubuntu Feisty Fawn and Ubunty Gutsy Gibbons.<br>
    Since Feisty Fawn and Gutsy Gibbons are installed by default with minimal packages, many required packages for this project are not available. <br>
    To correct this, you will first need to enable the universe and multiverse repositories.<br>
    To enable these, do the following:<br>
    <p><i class="command"># sudo gedit /etc/apt/sources.list</i></p>
    Delete everything in the file that you have not added yourself. If you are not running Gutsy Gubbons, replace each instance of the word "gutsy" with the name of the distro you are using, i.e. hoary, warty, dapper, or edgy. Got that? Ok, Paste the following into the file and save it. Be sure to make the necessary changes if you are running a different version than Gutsy:<br>
    <p><div class="commandBox">
		# Ubuntu supported packages<br>
		# GPG key: 437D05B5<br>
		deb http://us.archive.ubuntu.com/ubuntu gutsy main restricted<br>
		deb http://us.archive.ubuntu.com/ubuntu gutsy-updates main restricted<br>
		deb http://security.ubuntu.com/ubuntu gutsy-security main restricted<br><br>

		# Ubuntu community supported packages<br>
		# GPG key: 437D05B5<br>
		deb http://us.archive.ubuntu.com/ubuntu gutsy universe multiverse<br>
		deb http://us.archive.ubuntu.com/ubuntu gutsy-updates universe multiverse<br>
		deb http://security.ubuntu.com/ubuntu gutsy-security universe multiverse<br><br>

		# Ubuntu backports project<br>
		# GPG key: 437D05B5<br>
		deb http://us.archive.ubuntu.com/ubuntu gutsy-backports main restricted universe multiverse<br>
        </div></p><br>    
	Now we need to double check that the gpg keys are added correctly to avoid gpg errors. Sounds scary, but worry not! All it takes is one simple command:<br>
    <p><i class="command"># gpg --keyserver hkp://subkeys.pgp.net --recv-keys 437D05B5 &&  gpg --export --armor 437D05B5 | sudo apt-key add -</i></p>
After that we need to refresh our sources.list file like so:<br>
    <p><i class="command"># sudo apt-get update</i></p>
    Once that is complete, we can fetch all the required packages using the following command:<br>
    <p><div class="commandBox"># sudo apt-get --assume-yes install libjpeg62-dev x11proto-gl-dev autoconf jam bison flex-old automake1.9 libmng-dev libmikmod2-dev libogg-dev libvorbis-dev zlib1g-dev libpng12-dev build-essential libtool libglu1-mesa-dev xserver-xorg-dev libxt-dev libopenal0a libopenal-dev subversion zlibc libttf2 libfreetype6-dev libfreetype6 libasound2-dev alsa-oss libxxf86vm-dev libxext-dev x11proto-xext-dev
</div></p>
<p>If you are on Gutsy use this command</p>
<p><div class="commandBox"># sudo apt-get --assume-yes install libjpeg62-dev x11proto-gl-dev autoconf jam bison flex-old automake1.9 libmng-dev libmikmod2-dev libogg-dev libvorbis-dev zlib1g-dev libpng12-dev build-essential libtool libglu1-mesa-dev libglu1-xorg-dev xserver-xorg-dev libxt-dev libopenal0a libopenal-dev subversion zlibc libttf2 libfreetype6-dev libfreetype6 libasound2-dev alsa-oss libxxf86vm-dev libxext-dev x11proto-xext-dev
</div></p>
<p>If you are on Hardy use this command</p>
<p><div class="commandBox"># sudo apt-get --assume-yes install libjpeg62-dev x11proto-gl-dev autoconf jam bison flex-old automake1.9 libcurl4-openssl-dev libmng-dev libmikmod2-dev libogg-dev libvorbis-dev zlib1g-dev libpng12-dev build-essential libtool libglu1-mesa-dev libglu1-xorg-dev xserver-xorg-dev libxt-dev libopenal0a libopenal-dev subversion zlibc libttf2 libfreetype6-dev libfreetype6 libasound2-dev alsa-oss libxxf86vm-dev libxext-dev x11proto-xext-dev</div></p>

<strong> ALL of these above commands are assuming you do not need a server if you do please follow directions in the <a href="#mysql">mysql</a> section for installing other required packages</strong>
</div>

<div class="Linux-Debian">
    <p>Note: This section is incomplete and untested, but contains the Debian specific build information that was previously in the manual.</p>
    <p>Due to the number of dependencies needed, if you wish to read the homepage listing, or dependency description please select Linux's generic dropdown selection.</p>

    <p>via apt-get: <i class="command">#apt-get install jam svn build-essentials libfreetype6-dev libasound2-dev</i></p>

    <p>If you are using Debian testing (which uses X.Org), then you need xlibmesa-gl-dev instead of xlibmesa-glu-dev.</p>
    <p>
        Debian: <i class="command">#apt-get install xlibmesa-glu-dev</i><p>
        Testing: <i class="command">#apt-get install xlibmesa-gl-dev</i><p>
    </p>

    <p>Also, if you have flex, bison or automake other than automake1.8 installed, they should be uninstalled.
    They would conflict with the older versions flex-old, bison1.35 and automake1.8 needed to compile PlaneShift.</p>

    <p><i class="command">#apt-get install libtool bison-1.35 flex-old autoconf automake1.8</i></p>
    <p><i class="command">#apt-get install libmng-dev libmikmod2-dev libogg-dev libvorbis-dev zlib1g-dev libpng3-dev libjpeg62-dev python2.3-dev</i></p>
<strong> BOTH of these above commands are assuming you do not need a server if you do please follow directions in the <a href="#mysql">mysql</a> section for installing other required packages</strong>
</div>

<div class="Linux">
    <h3>nVidia Toolkit</h3>
    <p>Since Crystal Space needs it (independently from your graphic card, so <i>even if you have an ATI card</i>), you
    should download from <a href="http://developer.nvidia.com/object/cg_toolkit.html">www.nvidia.com</a> the nvidia-toolkit.  Download the appropriate version for your architecture&#8212;either x86 or x86-64.
    Make sure to use the appropriate file based on your chipset. To install the file, place it in the root directory and use the following command, then delete the tar.gz file.</p>
    <div class="Linux-Generic">
        <i class="command">tar -zxvf Cg-2.0_May2008_x86*.tgz</i>
    </div>
    <div class="Linux-Debian">
        <i class="command">tar -zxvf Cg-2.0_May2008_x86*.tgz</i>
    </div>
    <div class="Linux-Slackware">
        <i class="command">tar -zxvf Cg-2.0_May2008_x86*.tgz</i>
    </div>
    <div class="Linux-Ubuntu">

	If you are on Gutsy you can
	<p><i class="command"># sudo apt-get install nvidia-cg-toolkit</i></p>        
	<p> Otherwise you MUST do this</p>
	<div class="commandBox"># wget -c http://developer.download.nvidia.com/cg/Cg_2.0/2.0.0015/Cg-2.0_May2008_x86.tgz</br>
        # sudo mvCg-2.0_May2008_x86*.tgz /</br>
        # cd /</br>
        # sudo tar -zxvf Cg-2.0_May2008_x86*.tgz</br>
        # sudo rm Cg-2.0_May2008_x86*.tgz</div></br>
    </div>
    <div class="Linux-Gentoo">
        <p>Via portage: <i class="command"># emerge nvidia-cg-toolkit</i></p>
    </div>
</div>
<div class="MacOSX" >
To build on OSX you need to Install Xcode which you can get from <a href="https://connect.apple.com/">here.</a> This guide also recomends you to install fink. You can get fink from <a href="http://fink.sourceforge.net/">here.</a> 
Note: Do not use darwinports if you are using fink. It can cause conflicts if 
they both have the same package installed. <br />
Open a terminal window and set the required environment variables for fink by 
issuing the following command:
<br />
<div class="commandBox" ><pre># <code>/sw/bin/pathsetup.sh</code></pre>
</div>
<div class="commandBox" ><pre># <code>source /sw/bin/init.sh</code></pre>
</div>
<br />
<br />
Configure fink (Optional)
We are going to configure fink to download and install packages from source only. (no binary packages)<br />
This step is optional, but has a better success rate for installing the fink 
dependencies.
<br />
<div class="commandBox" ><pre># <code>fink configure</code></pre>
</div>
<br />
Provided below are the questions and the standard recommended answers for the configuration:
<div class="commandBox" ><pre>
Password:
OK, I'll ask you some questions and update the configuration file in '/sw/etc/fink.conf'.
In what additional directory should Fink look for downloaded tarballs? [] 
Which directory should Fink use to build packages? (If you don't know what this means, it is safe to leave it
at its default.) [] 

Should Fink try to download pre-compiled packages from the binary distribution if available? [y/N] n
(1)     Quiet (do not show download statistics)
(2)     Low (do not show tarballs being expanded)
(3)     Medium (will show almost everything)
(4)     High (will show everything)
 
How verbose should Fink be? [4] 4
 
Proxy/Firewall settings
Enter the URL of the HTTP proxy to use, or 'none' for no proxy. The URL should start with http:// and may
contain username, password, and/or port specifications. Note that this value will be visible to all users on
your computer.
Example, http://username:password@hostname:port
Your proxy:  [none] 
Enter the URL of the FTP proxy to use, or 'none' for no proxy. The URL should start with http:// and may
contain username, password, and/or port specifications. Note that this value will be visible to all users on
your computer.
Example, http://username:password@hostname:port
Your proxy:  [none] 
Use passive mode FTP transfers (to get through a firewall)? [Y/n] y
 
Mirror selection
All mirrors are set. Do you want to change them? [y/N] n
 
Writing updated configuration to '/sw/etc/fink.conf'...
</pre></div>
<br />

You need to install Ftjam which you can get from <a href="http://sourceforge.net/project/showfiles.php?group_id=3157">here.</a> You also need to install the following packages from Fink <br />
<i class="command"> libjpeg freetype freetype-shlibs freetype2 freetype2-dev freetype2-shlibs libogg libvorbis0 libvorbis0-shlibs libmng2 libpng3 autoconf2.5 automake1.9 libtool wget curl</i><br /><br />

Since SVN is not always installed you need to make sure it is installed you can get it from <a href="http://metissian.com/projects/macosx/subversion/">here.</a> <br />

You also need to install Nvidia's Cg Toolkit from <a href="http://www.nvidia.com/object/cg_toolkit.html">
here.</a></div>
<p>
    <h3>Server Databases</h3>
    <i>Optional section</i>

    <p>
        <b><a name="mysql">MySQL:</b><br>
        If you have the intentions to run the server you have to install <a href="http://www.mysql.org/">MySQL</a> as well.
        PlaneShift uses MySQL version 5.0.
	    <div class="Linux-Generic">   
	    <p> For your distro install the mysql package and the -dev package, It might be named mysql-dev or libmysqlclient-dev or something similar.<p> 
              <p>If after building if you see that mysql was not found when running the server and you get the following error:
	      <i class="command">WARNING: could not load plugin 'planeshift.database.mysql'</i> make sure you have  the dev package installed, if it was not installed, ./autogen.sh, ./configure, and recompile the server again, according to the documentation below.</p>
		</div>
            <div class="Linux-Ubuntu">
            <p>for Feisty via apt-get: <div class="commandBox"># sudo apt-get --assume-yes install libdbd-mysql-perl libdbi-perl libnet-daemon-perl libplrpc-perl mysql-client-5.0 mysql-server-5.0 libmysqlclient15-dev libmysqlclient15off</div></p>
	    <p>for Gutsy via apt-get: <div class="commandBox"># sudo apt-get --assume-yes install libdbd-mysql-perl libdbi-perl libnet-daemon-perl libplrpc-perl mysql-client-5.0 mysql-server-5.0 libmysqlclient15-dev libmysqlclient15off </div></p> 

		<p>If after building if you see that mysql was not found when running the server and you get the following error:
		<i class="command">WARNING: could not load plugin 'planeshift.database.mysql'</i> make sure you have libmysqlclient15-dev installed, if it was not installed, ./autogen.sh, ./configure, and recompile the server again, according to the documentation below.</p>
	</div>
        <div class="Linux-Gentoo">
            <p>via portage: <i class="command">#emerge mysql</i></p>
        </div>
	<div class="Linux-Debian">
	   You need to make sure you have libmysqlclient-dev and mysql-server installed for your server to run correctly
		<p>If after building if you see that mysql was not found when running the server and you get the following error:
		<i class="command">WARNING: could not load plugin 'planeshift.database.mysql'</i> make sure you have libmysqlclient-dev installed, if it was not installed, ./autogen.sh, ./configure, and recompile the server again, according to the documentation below.</p></div>

        <div class="Windows">
                <p>From the download page, select the Community Server option. You will end up in another page where you should select
			one of the available Windows downloads between Windows (x86) ZIP/Setup.EXE and the Without Installer version.
                 It is recommend to select the "Without Installer version", since you have just to unzip the file in c:\ and rename the folder
                (which should resemble mysql-5.0.xx) to simply mysql. At the end of these steps, you should have: c:\mysql\</p>

                <div class="MINGW">
                    <p>Also, we need to create MinGW compatible libraries from the standard
                    Microsoft compatible libraries that ship with MySQL. Read the
                    <a href="http://www.mingw.org/MinGWiki/index.php/MSVC-MinGW-DLL">FAQ for mingw32</a>
                    under the section "How can an MSVC program call a MinGW DLL, and vice versa?"
                    You will find reimp here: <a href="http://wyw.dcweb.cn/reimp_new.zip">http://wyw.dcweb.cn/reimp_new.zip</a><br>
                    You will have to compile it as an exe is not provided anymore, create and extract the contents of the zip into C:\msys\1.0\src\reimp, open an msys prompt then do the following:<br>
                    <p><div class="commandBox">
                        cd /usr/src/reimp/src<br>
                        make<br>
                        cp reimp.exe /c/mingw/bin<br>
                        cd /c/mysql/lib/debug<br>
                        reimp -d libmysql.lib<br>
                        dlltool -k -d LIBMYSQL.def -l libmysqlclient.a<br>
                        rm LIBMYSQL.def<br>
                        mv libmysqlclient.a ..
                    </div></p>
                </div>
        </div>

        <b>WordNet:</b><br>
        You will also need the WordNet dictionaries. Download and install the <a href="http://wordnet.princeton.edu/obtain/">WordNet binaries</a>, version 2.1.
        <div class="Linux-Ubuntu">
            <p>via apt-get: <i class="command"># sudo apt-get --assume-yes install wordnet-base wordnet</i></p>
        </div>
    </p>
</p>

<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<h2><a name="download">Download Source Code</a></h2>
<div class="Linux">
    <h3>Cal3D</h3>
    <p>We need to build cal3d from source before we can start on Crystal Space. Cal3d is a library that is used for
    handling skeleton systems. This is a very nice system and can allow for fluid transformations between animations.
    This needs to be built/installed first because when we configure Crystal Space it has to find the cal3d libraries
    so it can know to build the sprcal3d plugin.  Cal3D doesn't change much, so just download latest stable or checkout latest from svn:</p>
    <p><a href="http://home.gna.org/cal3d/">Cal3D Home</a></p>
    <p><i class="command">/home/user/development$ svn co -r CAL3D_SOURCE_REV svn://svn.gna.org/svn/cal3d/trunk/cal3d cal3d</i></p>


    <h3>Crystal Space (CS)</h3>
    <p>Crystal Space 3D SDK is the engine that we use for rendering and sound.</p>
    <div class="User">
    <p><i class="command">/home/user/development$ svn co -r CS_SOURCE_REV https://crystal.svn.sourceforge.net/svnroot/crystal/CS/branches/release/V1.4 cs</i></p>
    </div>
    <div class="Developer">
    <p><i class="command">/home/user/development$ svn co -r CS_SOURCE_REV_HEAD https://crystal.svn.sourceforge.net/svnroot/crystal/CS/branches/release/V1.4 cs</i></p>
    </div>

    <h3>PlaneShift</h3>
    <p>Lastly, download our source:</p>
    <div class="User">
    <p><i class="command">/home/user/development$ svn co https://planeshift.svn.sourceforge.net/svnroot/planeshift/stable planeshift</i></p>
    </div>
    <div class="Developer">
    <p><i class="command">/home/user/development$ svn co https://planeshift.svn.sourceforge.net/svnroot/planeshift/trunk planeshift</i></p>
    </div>



    <h3>Updating Sources</h3>
    <p>From time to time, newer PlaneShift revisions will require you to upgrade your cal3d and CS repositories to a newer revision as well.  To update your supporting libraries, always be certain that you use the "-r" option keep from updating to the latest revision:</p>

    If you want to update to a new revision replace REVISON with the number of the revision you want to use:
    <p><div class="commandBox">
	/home/user/development/cal3d$ svn update -r REVISION<br>
        /home/user/development/cs$ svn update -r REVISION<br>
    </div></p>
	<p>Unlike the supporting libraries, you will generally want to use the latest PlaneShift source (or the HEAD) rather than an intermediate revision.  In this case, you will omit the "-r" option like so:
	<div class="commandBox">
	/home/user/development/planeshift$ svn update
	</div></p><br>
    If, for some reason, you wish to update any of the supporting libraries to the latest version (i.e. the HEAD), you have to remove the sticky date tag. WE DO NOT RECOMMEND THIS as it may break your build:
    <p><div class="commandBox">
	/home/user/development/cal3d$ svn update -r HEAD<br>
        /home/user/development/cs$ svn update -r HEAD<br>
    </div></p>


If you update a repository, you will need to recompile that repository and each repository that depends on it. Before doing so, you should do a "jam clean" for each project you want to jam again. So, for example, if you want to rebuild PS you will do:
    <p><div class="commandBox">
        /home/user/development/planeshift$ jam clean<br>
        /home/user/development/planeshift$ jam -aq
    </div></p>
</div>
<div class="Windows">
    <h3>Crystal Space (CS)</h3>
    <p>Crystal Space is the 3D Software Development Kit (SDK) that is used in PlaneShift mainly for rendering and sound.</p>
    <p>
        Right-click on the development directory and select "SVN Checkout". Specify the URL as:
    <div class="User">
    <p><i class="command">https://crystal.svn.sourceforge.net/svnroot/crystal/CS/branches/release/V1.4</i></p>
        Specify the checkout directory as "C:\development\CS", select "Revision", and paste the current
        CS revision number: CS_SOURCE_REV
    </div>
    <div class="Developer">
    <p><i class="command">https://crystal.svn.sourceforge.net/svnroot/crystal/CS/branches/release/V1.4</i></p>
        Specify the checkout directory as "C:\development\CS", select "Revision", and paste the current
        CS revision number: CS_SOURCE_REV_HEAD
    </div>
    </p>


<h3>CS Windows Libraries</h3>
    <p>Rather than having to install CS dependant components manually, Microsoft Visual C++, MinGW/MSYS and Cygwin
    users can download a single package which contains all common headers, pre-built library files, and dynamic link
    libraries in pre-compiled form from the Crystal Space website, http://www.crystalspace3d.org/.</p>

    <p>The latest version of such libraries is available at:
    <div class="Normal">
    <a href="http://www.crystalspace3d.org/downloads/cs-win32libs/">http://www.crystalspace3d.org/downloads/cs-win32libs/</a><br/>
    </div>
    <div class="Static">
    <a href="http://www.crystalspace3d.org/downloads/cs-win32libs/static/">http://www.crystalspace3d.org/downloads/cs-win32libs/static/</a><br/>
    </div>
    <div class="User">
    The currently used CS revision needs version <b>LIBS_VER_STAB</b>. Don't mix up with other versions!
    </div>
    <div class="Developer">
    The currently used CS revision needs version <b>LIBS_VER</b>. Don't mix up with other versions!
    </div></p>
   <div class="MSVC">
 <p>Run the program and install the libraries. The Default name is fine. </p></div>
<div class="MINGW">
<p>Run the program and install the libraries in C:\CSLibs. </p></div>

<p>When it asks you for the CS directory, enter
    <b>C:\development\CS</b>.<br>
    When you have to select the components, you can select the options you prefer through the check boxes.<br>
    
    <div class="MINGW">
    Be sure that you are selecting also the MinGW Win32 Libraries and the support files for MSYS and Cygwin.<br>    
    </div>
    <div class="MSVC">
    Be sure that you are selecting also the MSVC Win32 Libraries and the support files for your version of MSVC.<br>    
    </div>

    Be sure that you are installing both DirectX 9 headers and libraries files.<br>
    Continue the installation.
    If this is the first time you are installing the libraries and you do not yet have an SVN checkout of CS uncheck
    'Copy DLL's to CS directory' when prompted, otherwise check the box and set the dir to C:\development\CS.
    To copy the files later, you can do so via the option in the folder from the start menu.
    <div class="MINGW">Make sure 'Set up MSYS support' is checked when prompted.</div></p>

    <div class="MSVC">Make sure 'Set up VisualC support' is checked when prompted.</div></p>

    <p>
        You should now copy your CS Win Libs DLLs over to your new CS directory, if you haven't done that
        earlier, during the installation of the CS Winlibs.
	  Goto the start menu, go to Programs and then to CrystalSpace Win32 libraries.
        Select "Copy DLLs to a CS directory".  Set the directory to C:\development\CS when prompted.
        <div class="MINGW">
            Next, copy CrystalSpaceLibs MinGW directory into a new generic directory.
         </div>
    </p>
    
    <h3>PlaneShift</h3>
    <p>Lastly, download PlaneShift source code:</p>
    <p>
        Right-click on the development directory and select "SVN Checkout".<br>
        Enter the following as the URL:
        <div class="User">
        <p><i class="command">https://planeshift.svn.sourceforge.net/svnroot/planeshift/stable</i></p>
        </div>
        <div class="Developer">
        <p><i class="command">https://planeshift.svn.sourceforge.net/svnroot/planeshift/trunk</i></p>
        </div>
    </p>

    <h3>Updating Sources</h3>
    <p>If in the future you have the intentions to update cal3d, CS or PS because the team has decided to use
    another revision or because you feel like you want to update it, instead of doing a checkout you have simply to update.
    Please, remember that CS must be the exact revision specified above (or near the top of this <a name="dates">guide</a>) while PS can be newer.</p>

    <p>
        <i>CS SVN:</i><br>
        Right-click on the folder of the module you want and goto TortoiseSVN->"Update to Revision".
        Enter a new revsion number or select HEAD to get latest, there is a possibility that HEAD may not work with with PS so keep that in mind. Click ok, and the files will be updated.
    </p>

    <p>
        <i>PlaneShift</i><br>
        Right-click on the PlaneShift folder and click "SVN Update".
    </p>
</div>
<div class="MacOSX">
    <h3>Cal3D</h3>
    <p>We need to build cal3d from source before we can start on Crystal Space. Cal3d is a library that is used for
    handling skeleton systems. This is a very nice system and can allow for fluid transformations between animations.
    This needs to be built/installed first because when we configure Crystal Space it has to find the cal3d libraries
    so it can know to build the sprcal3d plugin.  Cal3D doesn't change much, so just download latest stable or checkout latest from svn:</p>
    <p><a href="http://home.gna.org/cal3d/">Cal3D Home</a></p>
    <p><i class="command">$HOME/development$ svn co -r CAL3D_SOURCE_REV svn://svn.gna.org/svn/cal3d/trunk/cal3d cal3d</i></p>

    <h3>Crystal Space (CS)</h3>
    <p>Crystal Space 3D SDK is the engine that we use for rendering and sound.</p>
    <div class="User">
    <p><i class="command">$HOME/development$ svn co -r CS_SOURCE_REV https://crystal.svn.sourceforge.net/svnroot/crystal/CS/branches/release/V1.4 cs</i></p>
    </div>
    <div class="Developer">
    <p><i class="command">$HOME/development$ svn co -r CS_SOURCE_REV_HEAD https://crystal.svn.sourceforge.net/svnroot/crystal/CS/branches/release/V1.4 cs</i></p>
    </div>

    <h3>PlaneShift</h3>
    <p>Lastly, download our source:</p>
    <div class="User">
    <p><i class="command">$HOME/development$ svn co https://planeshift.svn.sourceforge.net/svnroot/planeshift/stable planeshift</i></p>
    </div>
    <div class="Developer">
    <p><i class="command">$HOME/development$ svn co https://planeshift.svn.sourceforge.net/svnroot/planeshift/trunk planeshift</i></p>
    </div>
<h3>Updating Sources</h3>
    <p>From time to time, newer PlaneShift revisions will require you to upgrade your cal3d and CS repositories to a newer revision as well.  To update your supporting libraries, always be certain that you use the "-r" option keep from updating to the latest revision:</p>

    If you want to update to a new revision replace REVISON with the number of the revision you want to use:
    <p><div class="commandBox">
	$HOME/development/cal3d$ svn update -r REVISION<br>
        $HOME/development/cs$ svn update -r REVISION<br>
    </div></p>
	<p>Unlike the supporting libraries, you will generally want to use the latest PlaneShift source (or the HEAD) rather than an intermediate revision.  In this case, you will omit the "-r" option like so:
	<div class="commandBox">
	$HOME/development/planeshift$ svn update
	</div></p><br>
    If, for some reason, you wish to update any of the supporting libraries to the latest version (i.e. the HEAD), you have to remove the sticky date tag. WE DO NOT RECOMMEND THIS as it may break your build:
    <p><div class="commandBox">
	$HOME/development/cal3d$ svn update -r HEAD<br>
        $HOME/development/cs$ svn update -r HEAD<br>
    </div></p>


If you update a repository, you will need to recompile that repository and each repository that depends on it. Before doing so, you should do a "jam clean" for each project you want to jam again. So, for example, if you want to rebuild PS you will do:
    <p><div class="commandBox">
        $HOME/development/planeshift$ jam clean<br>
        $HOME/development/planeshift$ jam -aq
    </div></p>
</div></div>

<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<h2><a name="compile">Compile the Code</a></h2>

<div class="GCC">
    <div class="Linux">
		<p>If you have a dual core or better processor then you can take advantage of parallel make or jam by adding -j3 after the command. You can replace 3 with the number of jobs you want to run in parallel.</p>
        <h3>Cal3D</h3>
        <p>Since cal3d is a library in development we probably don't want to 'install' this one as root since there is a good
        possibility it will change in the future. Instead we will 'install' it into our working directory. This is done
        by using the --prefix option when we configure it.</p>
	<div class="linux-Generic" >
	Using a text editor open configure.in and remove the line 
	<p><div class="commandBox">
        AM_USE_UNITTESTCPP</div></p>
        <p>Or you can use the following sed command</p>
        <p> <div class="commandBox" >
  mv configure.in configure-old.in<br />
sed 's/AM_USE_UNITTESTCPP/# AM_USE_UNITTESTCPP/' configure-old.in > configure.in</div></p>
<p> Then you can build cal3d </p>
        <p><div class="commandBox">
            /home/user/development/cal3d$ autoreconf --install --force<br>
            /home/user/development/cal3d$ ./configure --prefix=/home/user/development/cal3d<br>
            /home/user/development/cal3d$ make<br>
            /home/user/development/cal3d$ make install
        </div></p></div>
	<div class="linux-Debian" >
	Using a text editor open configure.in and remove the line 
	<p><div class="commandBox">
        AM_USE_UNITTESTCPP</div></p>
        <p>Or you can use the following sed command</p>
        <p> <div class="commandBox" >
  mv configure.in configure-old.in<br />
sed 's/AM_USE_UNITTESTCPP/# AM_USE_UNITTESTCPP/' configure-old.in > configure.in</div></p>
<p> Then you can build cal3d </p>
        <p><div class="commandBox">
            /home/user/development/cal3d$ autoreconf --install --force<br>
            /home/user/development/cal3d$ ./configure --prefix=/home/user/development/cal3d<br>
            /home/user/development/cal3d$ make<br>
            /home/user/development/cal3d$ make install
        </div></p></div>
	<div class="linux-Gentoo" >
	Using a text editor open configure.in and remove the line 
	<p><div class="commandBox">
      AM_USE_UNITTESTCPP</div></p>
        <p>Or you can use the following sed command</p>
        <p> <div class="commandBox" >
  mv configure.in configure-old.in<br />
sed 's/AM_USE_UNITTESTCPP/# AM_USE_UNITTESTCPP/' configure-old.in > configure.in</div></p>
<p> Then you can build cal3d </p>
        <p><div class="commandBox">
            /home/user/development/cal3d$ autoreconf --install --force<br>
            /home/user/development/cal3d$ ./configure --prefix=/home/user/development/cal3d<br>
            /home/user/development/cal3d$ make<br>
            /home/user/development/cal3d$ make install
        </div></p></div>
	<div class="linux-Slackware" >
	Using a text editor open configure.in and remove the line 
	<p><div class="commandBox">
        AM_USE_UNITTESTCPP</div></p>
        <p>Or you can use the following sed command</p>
        <p> <div class="commandBox" >
  mv configure.in configure-old.in<br />
sed 's/AM_USE_UNITTESTCPP/# AM_USE_UNITTESTCPP/' configure-old.in > configure.in</div></p>
<p> Then you can build cal3d </p>
        <p><div class="commandBox">
            /home/user/development/cal3d$ autoreconf --install --force<br>
            /home/user/development/cal3d$ ./configure --prefix=/home/user/development/cal3d<br>
            /home/user/development/cal3d$ make<br>
            /home/user/development/cal3d$ make install
        </div></p></div>
	<div class="linux-Ubuntu" >
	Using a text editor open configure.in and remove the line 
	<p><div class="commandBox">
        AM_USE_UNITTESTCPP</div></p>
        <p>Or you can use the following sed command</p>
        <p> <div class="commandBox" >
  mv configure.in configure-old.in<br />
sed 's/AM_USE_UNITTESTCPP/# AM_USE_UNITTESTCPP/' configure-old.in > configure.in</div></p>
<p> Then you can build cal3d </p>
        <p><div class="commandBox">
            /home/user/development/cal3d$ autoreconf --install --force<br>
            /home/user/development/cal3d$ ./configure --prefix=/home/user/development/cal3d<br>
            /home/user/development/cal3d$ make<br>
            /home/user/development/cal3d$ make install
        </div></p></div>
        Because we did not install cal3d we need to make sure other things can find it. This is done using the LD_LIBRARY_PATH:
        <p><i class="command">export LD_LIBRARY_PATH=/home/user/development/cal3d/src/cal3d/.libs/:$LD_LIBRARY_PATH</i></p>
</div></div></div>
     <div class="Linux">    
        <h3>Crystal Space (CS)</h3>
        <p>Now we can build it and use the configure line to tell it where we installed the cal3d libraries.
        To do this, use the prefix line that was used for Cal3d above.</p></div>
	<div class="Linux-Generic" >           
           <div class="User"><div class="commandBox">
            /home/user/development/cs$ ./configure --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
           <div class="Developer"><div class="commandBox">
            /home/user/development/cs$ ./configure --enable-debug --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
           <div class="Normal"><i class="command">
            /home/user/development/cs$ jam -aq libs plugins cs-config walktest</i></div><br>
           <div class="Static"><i class="command">
            /home/user/development/cs$ jam -aq libs staticplugins cs-config walktest_static</i><br>
           </div></div> 
	<div class="Linux-Debian" >           
            <div class="User"><div class="commandBox">
            /home/user/development/cs$ ./configure --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
           <div class="Developer"><div class="commandBox">
            /home/user/development/cs$ ./configure --enable-debug --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
           <div class="Normal"><i class="command">
            /home/user/development/cs$ jam -aq libs plugins cs-config walktest</i></div><br>
           <div class="Static"><i class="command">
            /home/user/development/cs$ jam -aq libs staticplugins cs-config walktest_static</i><br>
           </div></div> 
	<div class="Linux-Gentoo" >           
            <div class="User"><div class="commandBox">
            /home/user/development/cs$./configure --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
           <div class="Developer"><div class="commandBox">
            /home/user/development/cs$./configure --enable-debug --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
           <div class="Normal"><div class="commandBox">
            /home/user/development/cs$ jam -aq libs plugins cs-config walktest</div></div><br>
           <div class="Static"><i class="command">
            /home/user/development/cs$ jam -aq libs staticplugins cs-config walktest_static</i><br>
           </div></div> 
	<div class="Linux-Slackware" >           
            <div class="User"><div class="commandBox">
            /home/user/development/cs$./configure --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
           <div class="Developer"><div class="commandBox">
            /home/user/development/cs$./configure --enable-debug --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
           <div class="Normal"><i class="command">
            /home/user/development/cs$ jam -aq libs plugins cs-config walktest</i></div><br>
           <div class="Static"><i class="command">
            /home/user/development/cs$ jam -aq libs staticplugins cs-config walktest_static</i><br>
           </div></div> 
        <div class="Linux-Ubuntu">
	 <div class="User"><div class="commandBox">
            /home/user/development/cs$./configure --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
           <div class="Developer"><div class="commandBox">
            /home/user/development/cs$./configure --enable-debug --without-java --without-perl --without-python --without-lib3ds --with-cal3d=/home/user/development/cal3d</div></div><br>
	  <div class="Normal"><i class="command">
            /home/user/development/cs$ jam -aq libs plugins cs-config walktest</i></div><br>
           <div class="Static"><i class="command">
            /home/user/development/cs$ jam -aq libs staticplugins cs-config walktest_static</i></div><br>
	   </div></div>


<div class="Linux">	   
We should export the CRYSTAL environment variable so applications outside the Crystal Space	 
	         tree know where to find the .so's.	 
	         <p><i class="command">export CRYSTAL=/home/user/development/cs</i></p>	 

<h3>PlaneShift</h3>
        <p><div class="commandBox">
            /home/user/development/planeshift$ ./autogen.sh<br>
           <div class="User">
            /home/user/development/planeshift$ ./configure --with-cal3d=/home/user/development/cal3d<br>
           </div>
           <div class="Developer">
            /home/user/development/planeshift$ ./configure --enable-debug --with-cal3d=/home/user/development/cal3d<br>
           </div>
           <div class="Normal">
            /home/user/development/planeshift$ jam -aq client
           </div>
           <div class="Static">
            /home/user/development/planeshift$ jam -aq client_static
           </div>
</div></p>
        If you also want to build the server, do this as well:
        <div class="Normal">
           <p><i class="command">/home/user/development/planeshift$ jam -aq server</i></p>
        </div>
        <div class="Static">
           <p><i class="command">/home/user/development/planeshift$ jam -aq server_static</i></p>
        </div>
        If you want to build the extra tools, just do "jam -a".
<p> Before launching any PS app you need to tell PS where to find CS as we did not install it globally</p>
       <div class="commandBox">export LD_LIBRARY_PATH="/home/user/development/cal3d/src/cal3d/.libs/:/home/user/development/cs/:"$LD_LIBRARY_PATH</div>
       <p>If your psclient has no skin you are used to seeing launch pssetup after you have copied your art over and select a new skin</p>
       <p>If you wish for your psclient to not use the same user files as your other build/install you may run ps with the following command<br />
       <div class="commandBox">
/home/user/development/planeshift$ ./psclient -cfgset=PlaneShift.UserConfigPath=/home/user/.PlaneShift2</div>
      <p> You can also edit this in the psclient.cfg file under the game section uncomment the appropriate line and edit the path.</p> 
   </div>
</div></div></div>
<div class="MacOSX">
       <p>If you have a dual core or better processor then you can take advantage of parallel make or jam by adding -j3 after the command. You can replace 3 with the number of jobs you want to run in parallel.</p>
        <h3>Cal3D</h3>
        <p>Since cal3d is a library in development we probably don't want to 'install' this one as root since there is a good
        possibility it will change in the future. Instead we will 'install' it into our working directory. This is done
        by using the --prefix option when we configure it.</p>
	<div class="linux-Generic" >
	Using a text editor open configure.in and remove the line 
	<p><div class="commandBox">
        AM_USE_UNITTESTCPP</div></p>
        <p>Or you can use the following sed command</p>
        <p> <div class="commandBox" >
  mv configure.in configure-old.in<br />
sed 's/AM_USE_UNITTESTCPP/# AM_USE_UNITTESTCPP/' configure-old.in > configure.in</div></p>
<p> Then you can build cal3d </p>
        <p><div class="commandBox">
            $HOME/development/cal3d$ autoreconf --install --force<br>
            $HOME/development/cal3d$ ./configure --prefix=$HOME/development/cal3d<br>
            $HOME/development/cal3d$ make<br>
            $HOME/development/cal3d$ make install
        </div></p></div>
  <h3>Crystal Space (CS)</h3>
        <p>Now we can build it and use the configure line to tell it where we installed the cal3d libraries.
        To do this, use the prefix line that was used for Cal3d above.</p>
	   <div class="User"><div class="commandBox">
            $HOME/development/cs$./configure --without-java --without-perl --without-python --without-lib3ds --with-cal3d=$HOME/development/cal3d</div></div>
           <div class="Developer"><div class="commandBox">
            $HOME/development/cs$./configure --enable-debug --without-java --without-perl --without-python --without-lib3ds --with-cal3d=$HOME/development/cal3d</div></div><br>
           <div class="Normal"><i class="command">
            $HOME/development/cs$ jam -aq libs plugins cs-config walktest</i></div><br>
            <div class="Static"> there is no Mac static build guide at this time</div>
        We should export the CRYSTAL environment variable so applications outside the Crystal Space	 
	         tree know where to find the .so's.	 
	         <p><i class="command">export CRYSTAL=$HOME/development/cs</i></p>	
         
<h3>PlaneShift</h3>
        <p><div class="commandBox">
            $HOME/development/planeshift$ ./autogen.sh<br>
           <i class="User">
            $HOME/development/planeshift$ ./configure --with-cal3d=$HOME/development/cal3d<br>
           </i>
           <i class="Developer">
            $HOME/development/planeshift$ ./configure --enable-debug --with-cal3d=$HOME/development/cal3d<br>
           </i>
           <i class="Normal">
            $HOME/development/planeshift$ jam -aq client
           </i>
            <i class="Static"> there is no Mac static build guide at this time</i>
</div></p>
        If you also want to build the server, do this as well:
        <div class="Normal">
           <p><i class="command">$HOME/development/planeshift$ jam -aq server</i></p>
        </div>
        If you want to build the extra tools, just do "jam -a".
<p>If your psclient has no skin you are used to seeing launch pssetup after you have copied your art over and select a new skin</p>
       <p>If you wish for your psclient to not use the same user files as your other build/install you may run ps with the following command<br />
       <div class="commandBox">
$HOME/development/planeshift$ ./psclient.app/Contents/MacOS/psclient -cfgset=PlaneShift.UserConfigPath=$HOME/Library/Application Support/PlaneShift2</div>
      <p> You can also edit this in the psclient.cfg file under the game section uncomment the appropriate line and edit the path.</p> 
   </div>
    </div>
<div class="MINGW">
    <div class="Windows">


        <p>Run MSYS from the start menu to open the shell. Be aware that if you have MSYS opened already, you need to restart the console, otherwise
 many things won't be found during the build process. Make sure you run the export commands to set the environment variables again</p>
    
        <h3>Crystal Space (CS)</h3>
        <p>Switch to the Crystal Space source dir using 'cd /c/development/cs'.
        Configure to debug mode and jam. (if you wish to build in optimized mode, just run
        configure without any arguments) If you chose to build cal3d, rather than use
        it from the CS win libs, you can specify its location with:  --with-cal3d=/c/development/cal3d/
        <p><div class="commandBox"><div class="User">
            ./configure --without-java --without-perl --without-python --without-lib3ds --enable-shared=no</div>
<div class="Developer">
            ./configure --enable-debug --without-java --without-perl --without-python --without-lib3ds --enable-shared=no</div>
           <div class="Normal">
            jam -aq libs plugins cs-config walktest
           </div>
           <div class="Static">
            jam -aq libs staticplugins cs-config walktest_static
           </div></div>
        </div>
        </p>
        This will build all the needed libraries and plugins, as well as the standard test application.<br>
<div class="MINGW">
<p>For Mingw you need to copy also these files to the
Crystal Space directory for walktest to work:<br><div class=commandBox>
C:\msys\1.0\local\bin\libpng12-0.dll<br>
C:\MinGW\bin\libjpeg-62.dll<br>
C:\MinGW\bin\zlib1.dll<br></div><br>
or by command-line:<br><div class=commandBox>
cp /c/msys/1.0/local/bin/libpng12-0.dll <br>
cp /c/MinGW/bin/libjpeg-62.dll <br>
cp /c/MinGW/bin/zlib1.dll <br></div>
</p>
</div>
        After everything compiles, try running "walktest.exe" in /c/development/cs to check that everything is ok.

        <h3>PlaneShift</h3>
        <p>If you chose to build cal3d, rather than use
        it from the CS win libs, you can specify its location after the configure command with:  --with-cal3d=/c/development/cal3d/ <br>
Change your working directory to PS's, 
 and do:</p>
        <p><div class="commandBox">
            ./autogen.sh<br>
           <div class="User">
            ./configure <br>
           </div>
           <div class="Developer">
            ./configure --enable-debug <br>
           </div>
</div>
</p>
        If you're building the server instead do the following as you also need to configure with your MySQL location:
        <p><div class="User"> <div class="commandBox">
            ./autogen.sh<br>
            ./configure --with-mysqlclient=/c/mysql<br>
        </div></div></p>
        <p><div class="Developer"> <div class="commandBox">
            ./autogen.sh<br>
            ./configure --enable-debug --with-mysqlclient=/c/mysql<br>
        </div></div></p>

<p><div class="commandBox">
           <div class="Normal">

            jam -aq client
           </div>
           <div class="Static">
            jam -aq client_static
           </div>
        </div></p>
        If your building a server also do the following to compile it:
        <div class="Normal">
           <p><i class="command">jam -aq server</i></p>
        </div>
        <div class="Static">
           <p><i class="command">jam -aq server_static</i></p>
        </div>
        <p>If you want to build the extra tools, just do "jam -a". </p>

        <p>This should compile PlaneShift.</p>
<p>If your psclient has no skin you are used to seeing launch pssetup after you have copied your art over and select a new skin</p>
       <p>If you wish for your psclient to not use the same user files as your other build/install you may run ps with the following command<br />
       <div class="commandBox">
psclient.exe -cfgset=PlaneShift.UserConfigPath=C:\development\pssettings</div>
      <p>You can also edit this in the psclient.cfg file under the game section uncomment the appropriate line and edit the path.</p>
    </div>
</div></div>
    
<div class="MSVC">

    <h3>Setup MSVC Environment</h3>

    <p><b>Note for MSVC 2005 (also known as Visual Studio 8.0, MSVC 8.0 or Visual Studio .NET 2005)
    (Full Edition Only)</b>: Make sure the "Show all settings" checkbox is checked in
    Tools->Options before continuing.<br>
    If you have MSVC 2003, you might know it as MSVC 7.1, Visual Studio 7.1 or Visual Studio .NET 2003. If you have MSCV 2008, you might know it as MSVC 9.0, Visual Studio 9.0 or Visual Studio .NET 2008.
    Here we will add all the directories containing all the include and libraries files that we will need to
    use for compiling PlaneShift.<br> Under Tools->Options in you MSVC look on the left hand side for the Projects
    folder. Under Projects choose "VC++ Directories". In the "Show Directories for" choose "Include Files".
    Click the new folder icon and add the following directories, one by one:</p>
    <p>
        C:\development\CS\include<br>
        C:\development\CS\include\csutil\win32<br>
        C:\mysql\include
    </p>

    <p>In the "Show Directories for" choose "Library Files". Click the new folder icon
    to add the following directories:</p>
    <p>
        C:\mysql\lib\opt<br>
    </p>

    <h3>Crystal Space (CS)</h3>
    <p>
        <div class="Normal">
        If you have MSVC 7.0 open C:\development\CS\mk\msvc7\wkstypical.sln<br>
        If you have MSVC 7.1 open C:\development\CS\mk\msvc71\wkstypical.sln<br>
        If you have MSVC 8.0 open C:\development\CS\mk\msvc8\wkstypical.sln
        If you have MSVC 9.0 open C:\development\CS\mk\msvc9\wkstypical.sln
        </div>
        <div class="Static">
        If you have MSVC 7.0 open C:\development\CS\mk\msvc7\wksstatic.sln<br>
        If you have MSVC 7.1 open C:\development\CS\mk\msvc71\wksstatic.sln<br>
        If you have MSVC 8.0 open C:\development\CS\mk\msvc8\wksstatic.sln
        If you have MSVC 9.0 open C:\development\CS\mk\msvc9\wksstatic.sln
        </div>
    </p>
    <p>Make sure that your specific 'msvc' folder has the 'read only' box unchecked (right click on the folder
and select Properties, 'read only' is one of the attributes in the General tab) before continuing.</p>
    
    <p>Go into the 'Build' menu, and select 'configuration manager'. Change the 'Active Solution Configuration' to 'Release(with DLLs)'.<br>
    Right click on the solution and select 'Build Solution'. To test the build of CS, run walktest.exe in C:\development\CS.<br>
    If you encounter any errors, check you have done everything correctly, and then if the problem persists, you can
    ask for help in the CS IRC channel:<br>
    irc.freenode.net #crystalspace</p>
   
    <h3>PlaneShift</h3>
    <p>Under Tools-&gt;Options in you MSVC look on the left hand side for the Projects
    folder. Under Projects choose "VC++ Directories". In the Show Directories for: choose
    "Library Files". Click the new folder icon to add the following directories:</p>
    <p>
        C:\development\CS\out\releaseX\libs<br>
    </p>
    <p>You have to change X (in the path concerning CS) to these
    values, depending from the version you have of MSVC:</p>
    <p>
        7 for MSVC 7<br>
        71 for Visual Studio .NET 2003/MSVC 7.1<br>
        8 for Visual Studio .NET 2005/MSVC 8<br>
        9 for Visual Studio .NET 2005/MSVC 9
    </p>

    <p>
        <div class="Normal">
        If you have MSVC.NET 7.0 open C:\development\planeshift\mk\msvc7\wkspstypical.sln<br>
        If you have MSVC.NET 2003/VC 7.1 open C:\development\planeshift\mk\msvc71\wkspstypical.sln<br>
        If you have MSVC.NET 2005/VC 8.0 open c:\development\PlaneShift\mk\msvc8\wkspstypical.sln
        If you have MSVC.NET 2008/VC 9.0 open c:\development\PlaneShift\mk\msvc9\wkspstypical.sln
        </div>
        <div class="Static">
        If you have MSVC.NET 7.0 open C:\development\planeshift\mk\msvc7\wkspsstatic.sln<br>
        If you have MSVC.NET 2003/VC 7.1 open C:\development\planeshift\mk\msvc71\wkspsstatic.sln<br>
        If you have MSVC.NET 2005/VC 8.0 open c:\development\planeshift\mk\msvc8\wkspsstatic.sln
        If you have MSVC.NET 2008/VC 9.0 open c:\development\planeshift\mk\msvc9\wkspsstatic.sln
        </div>
    </p>

    <p>Do the following if you put mysql somewhere else than C:\mysql:<br>
    Right-click plgdbmysql, under properties->linker->general, change the "C:\mysql\lib\opt"
    in Additional Library Directories to whatever your location of mysql is.</p>

    <p>Build solution.</p>
</div>
<div class="Windows">
    <p>Note: You might have to copy a few DLL files from other build directories to your
    PlaneShift directory if you get problems. You usually need to move libz-cs.dll, and libmySQL.dll.</p>
<div class="MINGW">
<p>For Mingw you need to copy also these files to the
PlaneShift directory:<br><div class=commandBox>
C:\msys\1.0\local\bin\libpng12-0.dll<br>
C:\development\cs\cg.dll<br>
C:\development\cs\cgGL.dll<br>
C:\MinGW\bin\libjpeg-62.dll<br>
C:\MinGW\bin\zlib1.dll<br></div><br>
or by command-line:<br><div class=commandBox>
cp /c/msys/1.0/local/bin/libpng12-0.dll <br>
cp /c/development/cs/cg.dll <br>
cp /c/development/cs/cgGL.dll <br>
cp /c/MinGW/bin/libjpeg-62.dll <br>
cp /c/MinGW/bin/zlib1.dll <br></div>
</p>
</div>

</div>
<div class="MSVC">
    <h3>Setting Up For Debugging</h3>
    <p>Now before you can debug the programs, you need to change some properties of the project.<br>
    For each application you are interested in debugging (e.g. apppsclient):<br>
    Right-Click on the project.<br> Under properties->debugging change:<br>
    Command to: C:\development\planeshift\(name).exe<br>
    Working directory to: C:\development\planeshift\<br>
    You should be good to go now.</p>
</div>
<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<h2><a name="update">Get PS Art</a></h2>
<p>
You can choose to run your local client and server with the official artwork or with the SVN one.</p><p>
The SVN artwork is rather incomplete and it doesn't contain any fancy piece of art. It is however necessary
to have if you want to run your client. If you want to fetch this art, you need to collect it from SVN and put it in 
a <i>art</i> subdirectory in your PlaneShift directory.

<div class="Linux">
<p><i class="command">/home/user/development/planeshift$ svn co https://planeshift.svn.sourceforge.net/svnroot/planeshift/art</i></p>
</div>
 
<div class="Windows">
<p><i class="command">https://planeshift.svn.sourceforge.net/svnroot/planeshift/art</i></p>
</div>
</p>

<h3>From a PlaneShift installation</h3>
<p>
If you have previously downloaded a release package, you can use it to get the data. The data is in the "art" and
"data" directories. The only thing that should not be copied is the "data/gui" directory, because the contents
downloaded from the SVN are usually more recent and updated.
</p>

<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<h2><a name="server">Get the Server Running</a></h2>
<i>Optional section</i>

<h3>Copy Dictionary Files</h3>
<div class="Windows">
  <p>Simply copy the dictionary files from your \WordNet\2.1\dict folder to the \planeshift\data\dict folder.</p>
</div>
<div class="Linux">
  <p>Simply copy the dictionary files from your /usr/share/wordnet folder to the /home/user/development/planeshift/data/dict folder.</p>
</div>
<div class="MacOSX">
  <p>Simply copy the dictionary files from your /usr/share/wordnet folder to the $HOME/development/planeshift/data/dict folder.</p>
</div>
<h3>Create the Database</h3>
<p>Check if MySQL is running.<br>
<div class="Windows">
    <div class="MINGW">Also, you should use a Command Prompt in DOS for the MySQL client commands.</div>
</div>
You can start your MySQL server in this way:</p>
<div class="Linux-Slackware">
    <p><i class="command"># chmod 755  /etc/rc.d/rc.mysqld</i></p>
    <p><i class="command"># /etc/rc.d/rc.mysqld start</i></p>
    Then login to the MySQL client using (default username with no password):
    <p><i class="command">$ mysql -u username -ppassword</i></p>
    The default username is root with no password.
</div>
<div class="Linux-Generic">
    <p><i class="command"># /etc/init.d/mysql start</i></p>
    Then login to the MySQL client using (default username with no password):
    <p><i class="command">$ mysql -u username -ppassword</i></p>
    The default username is root with no password.
</div>
<div class="Linux-Debian">
    <p><i class="command"># /etc/init.d/mysql start</i></p>
    Then login to the MySQL client using (default username with no password):
    <p><i class="command">$ mysql -u username -ppassword</i></p>
    The default username is root with no password.
</div>
<div class="Linux-Gentoo">
    <p><i class="command"># /etc/init.d/mysql start</i></p>
    Then login to the MySQL client using (default username with no password):
    <p><i class="command">$ mysql -u username -ppassword</i></p>
    The default username is root with no password.
</div>
<div class="Linux-Ubuntu">
    <p><i class="command"># /etc/init.d/mysql start</i></p>
    Then login to the MySQL client using (default username with no password):
    <p><i class="command">$ mysql -u username -ppassword</i></p>
    The default username is root with no password.<br>
    If you wish to put a password on the root account you can
    <i class="command"> $ mysqladmin -u root password "newpwd"</i>
</div>
<div class="Windows">
<p>Start a command prompt (Start->Run and then type "cmd") and type:
    <p><i class="command">C:\mysql\bin\mysqld --console</i></p>
    Start another command prompt and then login to the MySQL client using (the default username is root with no password):
    <p><i class="command">C:\mysql\bin\mysql -u root</i></p>
</div>

How to create a new PS database:
<p><div class="commandBox">
    mysql> create database planeshift;<br>
    mysql> GRANT ALL PRIVILEGES ON planeshift.* TO planeshift@localhost IDENTIFIED BY 'planeshift';<br>
    mysql> quit
</div></p>

<div class="Linux">
    <p><div class="commandBox">
        $ cd home/development/planeshift/src/server/database/mysql/<br>
        home/development/planeshift/src/server/database/mysql/$ mysql -u planeshift -pplaneshift
    </div></p>
</div>
<div class="Windows">
    <p><div class="commandBox">
        cd c:\development\planeshift\src\server\database\mysql\<br>
        C:\mysql\bin\mysql -u planeshift -pplaneshift
    </div></p>
</div>

<p><div class="commandBox">
    mysql> source create_all.sql;<br>
    mysql> quit
</div></p>

The database PlaneShift has now been created for PlaneShift to use.<p>

Sometimes it is convenient to use another database name, user or password for development.
In this case the file psserver.cfg has to be updated with the changed values. To change the database
name the file create_all.sql also has to be modified.<p>

NOTE: If you have upgraded MySQL server to 4.1 or superior (while the client is still 4.0) please write this in your MySQL console:
<p><i class="command">UPDATE planeshift@localhost SET Password = OLD_PASSWORD('planeshift');</i></p>

<h3>Running the Server</h3>
<p>
<div class="Windows">
    <div class="MINGW">
        Go to your PlaneShift directory (C:\development\planeshift) and run psserver, this will start the server.<br>
        Note: psserver requires the DOS Command Prompt to run. psclient does not.<br>
    </div>
    <div class="MSVC">Go to your PlaneShift directory (C:\development\planeshift) and run psserver. This will start the server.</div>
</div>
<div class="Linux">Go to your PlaneShift directory (home/user/development/planeshift) and run psserver, this will start the server. If you have a script to start your server or load maps you can use<br><br>
<i class="command">./psserver --run=/this/script_name</i> <br> <br>	
</div>
<div class="MacOSX">Go to your PlaneShift directory (home/user/development/planeshift) and run psserver, this will start the server.</div>
Once the server has been started, you should see a "PS Server:" prompt. Not always does the prompt show PS Server: on first start but this is ok as long as you have gotten no errors so far.</p>

<div class="Windows">
    <p>Note: If you get any problems with psserver, make sure you have the latest version of MySQL 5.0
    and that your libMySQL.dll file in windows\system32 is the same as the one in mysql\lib\opt.</p>
</div>

Type the following to load the correct map and spawn all items and NPCs:
<p><div class="commandBox">
    PS Server: loadmap npcroom1<br>
    PS Server: loadmap npcroom2<br>
    PS Server: loadmap npcroom_corr<br>
    PS Server: loadmap podium<br>
    PS Server: spawn<br>
    PS Server: ready
</div></p>

<p>Additional maps can be listed with the "maplist" command, and loaded via the "loadmap" command.
To see a list of all available psserver commands, type "help".  You can shut down the server with "quit".</p>

<p>You should now be able to start psclient and log in. The server is localhost on port 13331, if your server
is located somewhere else or you want to connect to somebody's else server, you need to modify the servers list.

<div class="Windows">The servers list is located in C:\development\planeshift\data\servers.xml.</div> <br>
<div class="Linux">The servers list is located in home/user/development/planeshift/data/servers.xml.</div><br>
<div class="MacOSX">The servers list is located in home/user/development/planeshift/data/servers.xml.</div><br>


 The following accounts are in the SVN DB:</p>

<table>
    <tr>
        <th>Username</th>
        <th>Password</th>
        <th>Access Group</th>
    </tr>
    <tr>
        <td>vengeance</td>
        <td>keith</td>
        <td>full GM (30)</td>
    </tr>
    <tr>
        <td>acraig</td>
        <td>andrew</td>
        <td>normal (0)</td>
    </tr>
    <tr>
        <td>guest</td>
        <td>guest</td>
        <td>full GM (30)</td>
    </tr>
    <tr>
        <td>dev1</td> 
        <td>andrew</td>
        <td>full GM (30)</td>
    </tr>
    <tr>
	<td>dev2</td>
	<td>andrew</td>
        <td>full GM (30)</td>
    </tr>
    <tr>
        <td>gm1</td>
        <td>andrew</td>
        <td>GM2 (22)</td>
    </tr>
    <tr>   
        <td>gm2</td>
         <td>andrew</td>
        <td>GM6 (26)</td>
    </tr>
    <tr>
        <td>player1</td>
        <td>andrew</td>
        <td>normal (0)</td>
    </tr>
    <tr>
        <td>player2</td>
        <td>andrew</td>
        <td>normal (0)</td>
    </tr>
    <tr>
        <td>player3</td>
        <td>andrew</td>
        <td>normal (0)</td>
    </tr>
    <tr>
        <td>player4</td>
        <td>andrew</td>
        <td>normal (0)</td>
    </tr>
</table>

<p>
    To perform server actions while logged in, as a GM character, first execute the /admin command.  You will be
    given the list of available commands for your account's security group.  When logged in with this account,
    you can view the in-game help to obtain the full list of available commands and syntax.  If you loaded any maps
    other than the test map "npcroom", you may teleport to them by using the command: "/teleport me map [mapname]"
</p>

<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<div class="Linux">
    <h2><a name="scripts">Mini Scripts</a></h2>
    <i>Optional section</i>
    <p>You might want to create some script so that you don't have to manually type in the environment variables every
    time. In this way you can also have multiple versions of CS coexisting peacefully.</p>

    <p><div class="commandBox">
        $ echo \#\!/bin/sh > PlaneShiftserver.sh<br>
        $ echo "export CRYSTAL=$PWD/cs/" >> PlaneShiftserver.sh<br>
        $ echo "cd $PWD/PlaneShift" >> PlaneShiftserver.sh<br>
        $ echo "./psserver \$@" >>  PlaneShiftserver.sh<br>
        $ chmod +x PlaneShiftserver.sh
    </div></p>

    <p><div class="commandBox">
        $ echo \#\!/bin/sh > PlaneShiftclient.sh<br>
        $ echo "export CRYSTAL=$PWD/cs/" >> PlaneShiftclient.sh<br>
        $ echo "cd $PWD/PlaneShift/" >> PlaneShiftclient.sh<br>
        $ echo "./psclient \$@" >>  PlaneShiftclient.sh<br>
        $ chmod +x PlaneShiftclient.sh
    </div></p>
</div>

<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<h2><a name="mounts">Mounting External Art</a></h2>
<i>Optional section</i>
<p>
    If you plan to do development work, or would just like to not need to copy over most of the
    art, you can mount the data straight from its existing location.  This is highly recommended
    for developers using the internal SVN art.
</p>

<h3>Mount the VFS Paths</h3>
<p>
    Open up the vfs.cfg file in the PlaneShift dir.  Find the list of mount points (VFS.Mount.* lines)
    and add a mount for each custom dir you wish to use.  For this example, I will mount a pre-installed
    package.  Using the VFS syntax key at the top, add a mount as follows:
</p>
<p><i class="command">VFS.Mount.bins = $/development$/PSbins$/</i></p>
<p>
    I have named the mount "bins" and the dir I am using is at "/development/PSbins/".
    <div class="Windows">
        <p>On Windows this will be equivalent to C:\development\PSbins\</p>
    </div>
</p>

<h3>Use the Mounts</h3>
<p>
    Open the cfg file of the PS application you want to use a mount.  To continue the above example,
    I can set the SVN build client to use the installed package's maps by editing the PlaneShift.Mount.zipmapdir
    line in psclient.cfg:
</p>
<p><i class="command">PlaneShift.Mount.zipmapdir = /bins/art/world/</i></p>
<p>
    If you wish the server and NPC client to use these as well, modify/add that line to their cfg files too.
</p>
<p>
    You can use the same mount as many times as needed, using different sub-dirs:
    <p><div class="commandBox">
        PlaneShift.Mount.npcszip = /bins/art/npcs.zip<br>
        PlaneShift.Mount.weaponzip = /bins/art/things/weapons.zip<br>
    </div></p>
</p>
<p>
    PS mounts such as PlaneShift.Mount.characterszip take a VFS path to a ZIP file, as opposed to a dir.
    If you wish to mount from an uncompressed dir, you need to add a slash to the end of the path:
</p>
<div class="Windows">
    On Windows it will be a backslash, not a forwardslash.
    <p><i class="command">PlaneShift.Mount.characterszip = /svn/planeshift/art/characters.zip\</i></p>
</div>
<div class="Linux">
    On Linux it will be a forwardslash.
    <p><i class="command">PlaneShift.Mount.characterszip = /svn/planeshift/art/characters.zip/</i></p>
</div>
<div class="MacOSX">
    On Mac it will be a forwardslash.
    <p><i class="command">PlaneShift.Mount.characterszip = /svn/planeshift/art/characters.zip/</i></p>
</div>

<h3>Mount List</h3>
<p>
    You can use the above method to easily mount most art.  The full list of mounts used is as follows:
    <p><i>
        Planeshift.Mount.zipmapdir<br>
        Planeshift.Mount.characterszip<br>
        Planeshift.Mount.npcszip<br>
        Planeshift.Mount.weaponzip<br>
        Planeshift.Mount.itemzip<br>
        Planeshift.Mount.azurezip<br>
        Planeshift.Mount.bluezip<br>
        Planeshift.Mount.brownzip<br>
        Planeshift.Mount.crystalzip<br>
        Planeshift.Mount.darkzip<br>
        Planeshift.Mount.redzip<br>
        Planeshift.Mount.potionszip<br>
        Planeshift.Mount.moneyzip<br>
        Planeshift.Mount.bookszip<br>
        Planeshift.Mount.shieldszip<br>
        Planeshift.Mount.toolszip<br>
        Planeshift.Mount.naturalreszip<br>
        Planeshift.Mount.foodzip<br>
        Planeshift.Mount.helmszip<br>
        Planeshift.Mount.jewelryzip<br>
        Planeshift.GUI.Skin.Base<br>
        Planeshift.GUI.Skin.Dir
    </p></i>
    <p>
        Note that the first and last mount to a directory, while the others must mount to a ZIP file unless
        the trailing slash is added as stated above.  Also note that this isn't everything; you will still
        have to copy some files from the package or updater, namely your data dir and all art not mounted.
        This includes effects, music, sounds, apps.zip, soundlib.xml, etc.  However, these things change less
        often than the above, and mounting the main portion of the art makes keeping things in sync much easier.
    </p>
</p>

<!---------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------->

<h2><a name="help">Getting Help</a></h2>
<p>If you have trouble getting any of this to work, please feel free to contact us and we will do our best to help.<br>
There is an IRC channel dedicated to providing help with building PlaneShift:</p>

<p>
    <b>Server:</b> irc.freenode.net<br>
    <b>Channel:</b> #PlaneShift-build
</p>

</body>
</html>
