*** 2008-04-28 by Andrew Craig
- Fixed FS#1282 - Tooltips in inventory window 
  http://www.hydlaa.com/flyspray_upgrade/index.php?do=details&task_id=1282
  It was getting confused with the stack count label.  Marking those as 
  'ignore' for WidgetAt() fixes this problem.

*** 2008-04-28 by Mike Gist
- Updated the mount paths and fixed the null canvas entry in npcclient.cfg
- Switched the iDocumentSystem priority around in psserver.cfg
- Disabled wordnet init as wordnet currently isn't used.
- Fixed #466, patch by Oskar Aul.

*** 2008-04-28 by Andrew Dai
- Fixed a bug which may have allowed NPCs to go through walls.
- Added printf checks to aid in collision algorithm debugging.
  These will probably be changed to asserts in the future.
- Fixed a bug which almost certainly allows actors to move through walls.
  The problem is that movement intervals were calculated assuming the actor
  does not rotate while moving.
- Fixed checking starting position of NPC which was causing huge CPU.
- Added optimization when doing movement for falling NPCs.

*** 2008-04-27 by Mike Gist
- Bumped CS and CEL revisions to 29388 and 3331 (1.2.1).

*** 2008-04-26 by Dave Bentham
- FS#1325: The valid author of a personalised book or map is set by the first
  player who edits it, not the buyer.

*** 2008-04-26 by Andrew Dai
- Added the dumpallocations command to dump all memory allocations.
  Only useful when CS is configured with extensive mem debug.
- Fixed #687, patch by Aresilek Besolez
- Fixed #775, patch by Aresilek Besolez
- Fixed #845, patch by Aresilek Besolez
- Fixed #1051, patch by Aresilek Besolez
- Fixed #1324, patch by Aresilek Besolez
- Fixed #1443, patch by Aresilek Besolez

*** 2008-04-25 by Andrew Dai
- Made npcclient db connection errors more informative.
- Added npclist summary command.
- Disabled NPC disabling for long processing times. As this eventually causes
  all NPCs to be disabled, the reason for the long tick times in most cases
  seem to be a result of memory swapping.

*** 2008-04-24 by Andrew Dai
- Added info about parallel make to the compiling guide.

*** 2008-04-23 by Frank Barton
- fixed upgrade schema for previous update

*** 2008-04-23 by Frank Barton
- Added table wc_accessrules in preparation for updated WC
- DB VER BUMP

*** 2008-04-21 by Dave Bentham
- Discard button on Quest/Event window now handles GM's events & new command "/event discard
  <name>" does same thing. A GM-discarded event removes all traces of the event, including
  participants' Event logs & the DB. Only works on 'completed' events.

*** 2008-04-21 by Andrew Dai
- Changed error message logging to log the real time/date to be much
  more useful.

*** 2008-08-20 by Mike Gist
- Changed the updating of effects to occur during the preprocessing event, so they no longer render a frame
  behind.
- Fixed effects to get the full position and transform of target meshes, instead of the relative.
- Added support in effects for rotation, so if a mesh rotates then the effect rotates with it.
- Fixed effects to move correctly with a target mesh.
- Added support in effects for attachable lights and converted the item effects code to use it.
- Altered effects to not update when they're attached to objects which are in an unloaded sector.

*** 2008-08-19 by Frank Barton(Eriroley)
- fixed date in my last entry
- Fixed FS#1340 - now the "BUY_PERSONALISE" flag is removed from personalised items when being purchased

*** 2008-04-19 by Kenny Graunke
- Commit patch from Vornne (with small changes by me) for FS#724, adding
  "instantcast" flag for GMs.  Also fixes "infinitemana" flag.
- Fixed GCC 4.3.0 warnings.

*** 2008-04-19 by Andrew Dai
- Added an assertion to prevent mysterious crashes if 2 psPersistWorld
  messages are received. This is an assertion because if it triggers it
  may represent a bug in network code.
- Duplicate packets are now acked correctly.
- Fixed a very old bug in the netcode where resent packets may be sent
  as a merged packet, meaning it would skip the duplicate packet detection.
- Added the self-pipe trick to allow lag-free network code on *nix systems.
  This doesn't support win32 yet as select on pipes does not work on win32. 
- Reduced the maximum message size limit because it was overflowing 16bits.
- Rethought and reverted approach to full message queue as old implementation
  had bugs in acking. The network thread now blocks on a full queue, the most
  elegant solution. Not dealing with acks reduces potential bugs and reduces
  cpu spinning.

*** 2008-08-18 by Frank Barton(Eriroley)
- Removed "use planeshift" lines from all .sql files in src/server/database/mysql except create_all.sql
- This removed an effective 'hard-code' of the database, now only one place to modify database name when creating db

*** 2008-04-18 by Frank Barton(Eriroley)
- completed work started in r1281 - personalized items now auto set to stat_type of "U" when purchased

*** 2008-04-18 by Andrew Dai
- Fixed network address type definitions.

*** 2008-04-17 by Andrew Dai
- Optimised the network code by replacing all uses of binary trees with hashes
  of the packets.
- Fixed bug where the npcclient would get stuck if it was already partially
  logged in.
- Moved the location of the flags byte in psNetPacket to improve data alignment
  and network performance.
- Improved high priority packets so that they are only acked if the message
  queue is not full.
- Fixed bug where the server would accept a logon even if the player is already
  logged in.
- Fixed crash in ip address parsing when printing errors.
- NETVER BUMP!

*** 2008-04-16 by Mike Gist
- Updated autoconf and jam files from CS.

*** 2008-04-16 by Andrew Dai
- Optimised the ClientConnectionSet by using a hash instead of a tree to hold
  clients.

*** 2008-04-15 by Jorrit Tyberghein
- Removed several calls to engine->GetBeginDrawFlags(). This call should
  *only* be used right before you plan to render the main 3D view. It should
  not be used before rendering 2D stuff or additional 3D views on top of
  the main 3D view. By fixing this PS can now safely use maps that
  have the <clearscreen> property set.

*** 2008-04-14 by Kenny Graunke
- Fix crash in /killnpc fix when given bad syntax.

*** 2008-04-13 by Kenny Graunke
- Fix FS#1421. /killnpc now works with pid:N, eid:N, or NPC name.  In the case
  of duplicates it will grab the first NPC with that name, similar to teleport;
  presumably in those cases you will target it or get the EID or PID.
- Fix pointer comparison vs. string comparison in adminmanager which would
  probably cause it to fail most of the time.  There's probably a better fix.

*** 2008-04-13 by Mike Gist
- Changed the factory loader to reuse already loaded data if existing, instead
  of always loading new regardless.

*** 2008-04-13 by Andrew Dai
- Added assertion to prove that a stack overflow bug in the mathscriptengine
  exists.
- Fixed buffer overrun issue with CalculateMaxHP script by disabling optimization
  on all scripts.

*** 2008-04-08 by Andrew Dai
- Added more profiling to character loading.
- Changed the way Client::outqueue is processed so that only a weak reference
  will be held to it in the netcode and so disconnected players will not
  receive 'ghost' packets.
- Patch by ThomPhoenix for some small fixes to the shortcut window and the
  shortcutedit window. Some alignment fixes by Nikodemus.
  And a new minframe that allows you to have a horizontally stretched shortcut
  window with the height of one button.

*** 2008-04-07 by Andrew Dai
- Added INSERT query support to prepared statements.
- Moved the characters and item_instances table to use prepared statements.

*** 2008-04-06 by Andrew Dai
- Fixed a race condition that occurs when a client is destructed while a packet 
  is being sent to it.
- Fixed an infinite event loop when weather is started on a sector with 0
  min rain drops.
- Fixed #1317, patch by Aresilek.
- Fixed #1268, patch by Aresilek.
- Reverted patch by Caarrie for bug #1373.

*** 2008-04-05 by Dave Bentham
- Fixed #1072: handle % in book text.

*** 2008-04-04 by Anders Reggestad
- NPC client will try to disconnect from the server if it fails to load a map.
- Added more error output when a map fails to load. Implemented return value
  according to load status so that the npcclient can disconnect if load fails.
- Added add and remove options to the /path alias command.
- Added new /path remove to delete a waypoint or a path.
- Added new /path rename to change name of waypoints and paths.
- Fixed a problem where /path adjust would try to move the start and
  end point instead of the closed path point.
- Fixed /path info and /path adjust to be aligned in the information that where
  printed and the entity in witch it the command works.
- Added check to prevent the user from creating a path back to the same waypoint
  unless there is a number of path points and the path have a name.

*** 2008-04-02 by Andrew Dai
- Fixed #1372, patch by peeg.
- Removed the requirement for the /admin command, patch by Steve
  Schwartfeger for #724.

*** 2008-04-01 by Anders Reggestad
- Another crash candidate fixed by Vornne

*** 2008-03-31 by Anders Reggestad
- Fixed a crash case where a null pointer where used in DumpNPC if no
  entity where connected.

*** 2008-03-31 by Mike Gist
- Fixed effects on equipped items not being removed with those items.

*** 2008-03-31 by Andrew Dai
- Fixed #1337, patch by Steven Schwartfeger.
- Fixed the autorun bug.

*** 2008-03-30 by Andrew Dai
- Fixed crash when attempting to buy a faction skill.

*** 2008-03-29 by Mike Gist
- Renamed mesh to baseMesh in psCharAppearance.
- Changed overloaded Mesh() function in GEMClientObject to be GetMesh() and
  SetMesh().
- Changed effects to load much earlier, at client startup.
  This is so effects attached to equipped items show in char selection.
- Added filter for character shaders to make them optional.
- Added torch and campfire items to svn database for testing purposes.
- Added a system to attach PS effects and lights to iMeshWrappers (items).
  These are specified in art/itemeffects.xml with the following features;
  - Specify by meshname (e.g. items#campfire01a).
  - Set whether or not the light and effect should show when the item is
    on the ground. 
  - Set any number of effects to attach to the mesh, along with the offset
    of each effect.
  - Set any number of lights to attach to the mesh, along with the offset,
    colour, intensity and radius of each light.

*** 2008-03-29 by Andrew Dai
- Fixed bug #1373, patch by Caarrie.
- Fixed bug #1214, patch by Steven Schwartfeger.
- Fixed bug #1327, patch by Steven Schwartfeger.
- Fixed bug #1364, patch by Caarrie.
- Fixed bug #1175, patch by Jochen Woidich.
- Changed the container view, patch by Caarrie.

*** 2008-03-27 by Eriroley
- Updated cachemanager to allow it to load items with stat_type of B, U, or R (expansion from just 'B')
- updated adminmanager to only display items in the /item windows where stat_type == B

*** 2008-03-26 by Andrew Dai
- Fixed various crashes on server startup and shutdown.
- Changed the /slide command so it no longer affects NPC spawn points.
- Added logging support to DB queries.

*** 2008-03-25 by Mike Gist
- Bumped CS revision to 29094 to get various bug fixes merged from CS trunk.

*** 2008-03-24 by Andrew Dai
- Fixed the enter key not responding on Mac OS.
- Fixed bug where item_stats was being updated wrongly due to a missing
  item_type_id_ammo field.
- Fixed bug where item_stats was being updated wrongly due to a switched
  weapon_speed field.
- Added a framework for prepared statements which improves security and
  performance.
- Refactored psItemStats::Save to use prepared statements for fewer bugs
  introduced by fieldname/value mismatches.

*** 2008-03-24 by Anders Reggestad
- Fixed so that velSource for npctypes with parent superclass isn't
  reset when loading the npctype.
- Increased the message queue at the npc client to be able to handle
  the large number of messages received at startup.
- Fixed a npc client crash where a null entity pointer could be used
  when printing info while disabling the npc.

*** 2008-03-23 by Andrew Dai
- Fixed the hug ground problem where player models were hugging by changing
  the limits.
- Fixed some crashes when start up fails.
- Psnpcclient is now compiled as a console app.

*** 2008-03-32 by Thomas Towey
- Added some runtime dev debug info on entrance failures.
- Check if identification category skill before displaying quality details.
- Added item identification helper functions.
- Cleaned up some comments and old database data.
- DBVER bump.

*** 2008-03-23 by Anders Reggestad
- Fixed crash when servers fails to Preload database items. Make sure
  that deleted database is set to NULL so that it will not be deleted
  twice.

*** 2008-03-22 by Anders Reggestad
- Updated cache manager to print complete at every preload function. So
  that it is easier to track if someone fails to report an error and
  stil return false from one of the preload functions.
- Fixed preload function to print error at one of the server crashes
  where item animations was incorrect without giving any hint.

*** 2008-03-22 by Andrew Dai
- Fixed crash when server started without mysql running.

*** 2008-03-21 by Mike Gist
- Fixed a few future bugs.

*** 2008-03-21 by Anders Reggestad
- Removed some deprected warnings since the server has been updated.
- Modified npcbehaviour.xml to remove next level of deprected syntax.
- Added dequeue of any queued dr data updates from the npc client if the
  entity is removed. Should prevent some of the NPCclient crashes we se.

*** 2008-03-21 by Andrew Dai
- Fixed crash FS#22 which occurred due to thread contention as psNetConnection
  assumed only one instance of itself, whereas psServerPinger instantiates
  multiple instances.

*** 2008-03-20 by Anders Reggestad
- Fix for the AllowDisconnect server crash. Separating the access to client
  data for the network thread and the server thread. Now the network thread
  check a boolean flag instead of reading the actor struct that should be
  only accessed from the server thread.
- Fixed a wrong %s that should have been %d that caused the server to crash
  when adjusting path points.
- Fixed a limit in a path loading algorithm to work with path with only
  one path point as well.

*** 2008-03-20 by Mike Gist
- Ownership checking fix on book writing from Ares.

*** 2008-03-19 by Thomas Towey
- Added math script for quality affect for consuming scripts.

*** 2008-03-19 by Andrew Dai
- Fixed potential cause of high cpu usage due to looping in fgets.

*** 2008-03-18 by Mike Gist
- Money.xml fix from electricsheep.
- Added normal map filter to podium.

*** 2008-03-18 by Andrew Dai
- Fixed the problem of the npcclient's network input queue being flooded while initially
  loading the maps. This should make npcs more responsive due to fewer out-of-order missed
  persistence messages.
- Added a count to Netbase to record the number of dropped messages due to a full queue.
- Cleaned up NetInfos.

*** 2008-03-16 by Dave Bentham
- Addition 2 to bug FS#1074 fix: allow a widget's border title font to be un-shadowed by 
  configuring shadow="no" to the 'title' node in the XML. Default is shadowed; but on 
  Sketch Viewer its not legible as it is black colour (illumination.xml).

*** 2008-03-15 by Roland Schulz
- changed loc_instance in item_instances to unsigned to avoid 0x7fffffff instance bug.
- DBVER BUMP!
- small fix to preserve INSTANCE_ALL members in item_instances on upgrade

*** 2008-03-16 by Thomas Towey
- Fixed server crash from allowing transformations to be done in hand without containers.for combine.

*** 2008-03-16 by Mike Gist
- Made sound loading not try cd maps.
- Added support for enabling/disabling features such as normal mapping. Use --use_normal_maps
  cmdline option to enable normal mapping on maps supporting them. Updated npcroom will be
  committed soon as an example.
- Added (experimental) cmdline option to enable/disable meshgen. Use --nouse_meshgen to
  disable, it's enabled by default.

*** 2008-03-15 by Thomas Towey
- Fixed some error messages in workmanager.cpp.
- Changed location constraint to start with sector number.
- Allow transformations to be done in hand without containers.
- Removed ',' as a constraint token since it prevented multiple contraints to be ANDed together.

*** 2008-03-15 by Dave Bentham
- Addition to bug FS#1074 fix: map name shows in Sketch Viewer border.

*** 2008-03-15 by Roland Schulz
- small fix for 2008-03-11 commit, make sure the description/crafting
  is actually displayed, not just hidden ;)

*** 2008-03-13 by Dave Bentham
- Fix for bug FS#1074: can give maps names; but requires a couple of art
  issues: 1) a place on the Sketch Viewer to display the name; 2) a new
  icon for the naming tool (currently same as Text Entry).
- NETVER BUMP!

*** 2008-03-12 by Kenny Graunke
- Ditch csArray in delayed query manager, since its size is statically
  determined anyway.
- Refactor introduction system, server-side, moving code from
  IntroductionManager to psCharacter.

*** 2008-03-11 by Roland Schulz
- Big cleanup: replace the interspersed unsigned int and int instance types with
  own type INSTANCE_ID typedef'ed to uint32. 
  Fellow coders, please, make sure never to use atoi to read uint32 values.
  This includes GetInt from db row (use GetUInt32) and GetAttributeAsInt.
  atoi("4294967295") = 2147483647 on 32 bit systems!
- add partial fix for FS#1182 as suggested in the comments. Not sure about the
  cause of the overtraining. 
- some more INSTANCE_IDs.
- Fix workmanager to set owner id before AddToContainer, which should do the
  right thing then regarding to guarding and updates to clients.

*** 2008-03-11 by Roland Schulz
- fix to book reading window to display craft description in a different font
  and disable save/write by Caarrie.
- More fixes to movement when interacting with windows by Vornne
- Also fix to main widget not getting key-release when another window was selected
  while holding a key, also thanks to Vornne.
- Vornne also provided a small patch to set the window title again after application
  loads so the right window title is displayed on linux (not 'Crystal Space Application').
- Also a fix to turn some forgotten numeric constant dev levels into the appropriate
  defines, again by Vornne... good work :)

*** 2008-03-11 by Anders Reggestad
- Fixed a crash where a csString returned null, when server receive a remote command.

*** 2008-03-11 by Andrew Dai
- Added an assertion to detect race conditions when incrementing a refcount
  in the threaded queue.
- Fixed a bug where behaviours were not being deactivated after Run had failed.
  This was causing npcclient to crash when wandering in an area with no waypoints.

*** 2008-03-10 by Roland Schulz
- Fix for resizing of windows working weirdly when window was aspect locked
  by coreyo ... Thanks :) (FS#900)

*** 2008-03-09 by Anders Reggestad
- Removed dublicate call to DropItem when handling production events.

*** 2008-03-09 by Mike Gist
- A few pslaunch fixes.

*** 2008-03-08 by Kenny Graunke
- Improved patch from Vornne for FS#1142: the -cfgset option on the
  commandline now works as well, allowing one to easily use the same
  installation of PS with different userdata directories, if one so desires.

*** 2008-03-08 by Mike Gist
- Some refactors of the updater<->GUI communication code. Now uses a shared object
  rather than passing and altering everything individually.

*** 2008-03-07 by Kenny Graunke
- Made characters automatically introduce themselves by saying their name.
- Patch from Vornne for FS#1142 - you can now set the /planeshift/userdata
  mountpoint by specifying PlaneShift.UserConfigPath=/foo in psclient.cfg.

*** 2008-03-06 by Kenny Graunke
- /introduce without a target now introduces you to everyone in /say range.
- Added Him() and His() to psRaceInfo, and renamed GenderString() to Sir().
- Disallow marriages until both parties know each other's name.
- Downcase words when trying to add them to the dictionary...this is critical
  because the check for disallowed words is case sensitive. (The concrete bug
  was that "I" was appearing in trigger groups, which didn't match the
  disallowed "i", so FilterKnownWords discarded neither from players' text.)

*** 2008-03-05 by Mike Gist
- Fixed skin and borderlist.xml load order. FS#326

*** 2008-03-04 by Roland Schulz
- Fixed last fix which was using str.Format(...,str), which isn't very
  likely to work as expected :)

*** 2008-03-04 by Kenny Graunke
- Fixed crash when creating items with cstr_id_gfx_mesh = 0.
  Apparently in CEL, SetMesh("", "") succeeds...and we weren't trying a
  dummy mesh in this case.

*** 2008-03-03 by Kenny Graunke
- Fixed FS#1147: players could see labels of non-introduced characters by
  using "Visible on mouse" mode.

*** 2008-03-02 by Sasha Levin
- An attempt to fix crash on production handling.
- Fixed crash on /list_advice_request.

*** 2008-03-02 by Roland Schulz
- Taking a stab at preventing crafting container stealing:
  Setting guarding character for newly fabricated items in container.

*** 2008-03-02 by Sasha Levin
- Fixed some broken mathscripts.

*** 2008-03-02 by Mike Gist
- Fixed crashing bugs in psclient and psupdater. FS#1141
- Added some better permissions checking in psupdater.
- Added support for marking files as executable FileUtil.
- Fixed boolean checking for false instead of true. FS#1145

*** 2008-03-01 by Sasha Levin
- Fixed marriage data being cached even after divorce.

*** 2008-02-29 by Roland Schulz
- Hopefully fixed 'Someone asks' message in advisor mode.
- Font change for spell cancel window
- /tell is also OOC and therefore no 'Someone' translation
- guild chat should also be OOC (?)
- and fixed the inverted condition :P
- fixed crash on quest note save on x86-64 systems (thanks Vornne)
- fixed questid always being 0 due to column change
- edited skills enum to match laanx
- added keepaspect="no" to control window, resize messes up otherwise.
  (and it really doesn't make too much sense to force this to keep aspect)
- changed 64 bit system quest comment saving to also work with xml tags
  when the comment is just a single line
- changed some csPtr in pawshelp to csRef to avoid crash when clicking in
  help window

*** 2008-02-28 by Sasha Levin
- Fixed crash on advisor more.

*** 2008-02-28 by Roland Schulz
- small spell window changes by ThomPhoenix
- also fix typo and revert background change - doesn't look good on default skin

*** 2008-02-27 by Dave Bentham
- Fixed bug FS#1086: long pet names

*** 2008-02-27 by Sasha Levin
- Fixed crash on /morph.
- Added persistency to guild wars.
- Fixed FS#1129 - /give command anomaly - Thanks Vornne.
- DBVER BUMP!
- Added book loading and saving from/to local files.
- Fixed crash in pawsMultilineEditTextBox caused due to bad text wrapping.

*** 2008-02-26 by Sasha Levin
- Added instance support to npc spawn rules.
- DBVER BUMP!
- Fixed char name in description window when GMs viewing other players.

*** 2008-02-24 by Sasha Levin
- Added targeting to /pos.
- Changed signess of instance field in DB.
- Unsigned a bunch of instances vars.
- Added some instance handling on teleport.

*** 2008-02-25 by Dave Bentham
- Fixed bug FS#1123: read books in containers.

*** 2008-02-24 by Frank Barton
- Set loot_rules.sql to have a unique key 'name' - preventing duplicate named loot rules

*** 2008-02-24 by Anders Reggestad
- Fixed FS#1121 where teleport crashed the server. Null pointer used
  in another fix. Now using the real and correct client pointer.
- Improved error messages when loading quest_scripts. Make sure
  server dosn't start if there are something wrong in the input data.

*** 2008-02-23 by Sasha Levin
- Removed hash lookups of sector name from DR message handling, instead
  just sending the name over the net. Should improve client cpu usage.
- NETVER BUMP!
- Resized the item description field.

*** 2008-02-23 by Mike Gist
- Added a workaround for FS#483 from Vornne.
- Help.xml updates from Caarrie.

*** 2008-02-22 by Mike Gist
- Added support for loading colldet from reduced maps.

*** 2008-02-22 by Anders Reggestad
- Fixed FS#989 preventing the user to issue the /pet attack command
  on a target if its allready attacked by another person or group.
- Improved FS#968 /pet target to be able to select specefic npcs
  using pid: or eid: syntax when there are multiple npcs with same name.
- Changed /pet target without arguments to send the eid: of the current
  target for the client. This will probably be the most used form.

*** 2008-02-22 by Sasha Levin
- Added an experimental threaded DR manager.

*** 2008-02-21 by Sasha Levin
- Masked some debug output on the client.
- Fixed bug with locating the proper ammo type for weapons.
- Added a quiver to the svn db.
- Fixed crash in chat bubbles.
- Quest steps that weren't completed when quest was completed are discarded
  instead of being marked as completed too.

*** 2008-02-20 by Andrew Craig
- Fixed problem with removing people from ignore list not actually
  removing them correctly.
- Chat bubbles will no longer show for people on ignore list.

*** 2008-02-20 by Kenny Graunke
- Fix reference counting bug in pssetup's skin window.

*** 2008-02-20 by Dave Bentham
- Fix for FS#193: book text protection between server & client.

*** 2008-02-20 by Sasha Levin
- Made it possible to shoot ammo out of a container - enabling the use of
  a quiver.
- Sending GUI updates to client when using an ammo item.
- Moved quest prereq loading to after the parsing of quest scripts, It's now
  possible to have to have a prereq of a step in a different quest.
- Passing the defenders secondary weapon to the combat mathscript. Allowing
  the calculation of shields.
- Modified names of attributes in GM screen and matched behaviours, Thanks
  Caarrie.

*** 2008-02-20 by Kenny Graunke
- Plugged some memory leaks.
- Fix reference counting bug in psDelayedMessageEvent.

*** 2008-02-19 by Roland Schulz
- fix FS#1019 - make illumination.xml keepaspect="no" by Vornne
- fix FS#1108 - typo when attempting to attack player with pet by Caarrie
- fix FS#1102 - make bow attack stop when out of ammo by Vornne
- remove explicit db name from item_stats.sql - no need to have it there
- add paragraph about changing db name/user/pass to compiling.html

*** 2008-02-19 by Sasha Levin
- Added GM attributes refresh to the client when using /set.
- Added SetText() and GetText() functionality to the checkboxes by coreyo.
- Refreshing the GM attributes window on new attributes message by coreyo.
- Matched guildhouse sign name with real item name.

*** 2008-02-19 by Mike Gist
- Changed csSyncRefCount to use atomic operations instead of a mutex.
- Renamed GenericQueue to GenericRefQueue: GenericRefQueue is now a fully
  functional queue of smart pointers. i.e. it both IncRef and DecRef correctly
  unlike GenericQueue did.
- Changed all allocations of MsgEntry so that they're initially held by smart
  pointers, and removed all the manual calls to IncRef and DecRef. Everything is
  handled by csRef now.
- Removed all other manual calls to IncRef and DecRef. This and the above changes
  should fix some potential leaks and crashes and also makes the code a bit more
  future proof.

*** 2008-02-19 by Kenny Graunke
- Made ProgressionEvents officially a class, not a struct...made the minimal
  set of things public for now.
- Constify libxpnet and remove use of const_cast<>.  Never use const_cast!

*** 2008-02-18 by Andrew Craig
- Fixed problem in psCelClient::GetActorByName() where it was not correctly doing
  a case insensitive compare on the names. 

*** 2008-02-18 by Anders Reggestad
- Modified npcclient to use the new psLinearMovement class.
- Added math script to calcualte the range a pet could be controlled from.
- Added math script to calcualte if the pet would react to a command.
- Added practice of empathy when commanding a pet.
- Modified character data db entries to be uniq npc's not templates to not
  break the test, thanks to Vornne.

*** 2008-02-18 by Sasha Levin
- Made it possible to use several ammo types in one weapon.
- Changed the way ammo is used, You have to hold it in your other hand.
- DB bump.

*** 2008-02-18 by Mike Gist
- Removed usage of CURL, replaced with libxpnet.
- Added download progress bar to the updater.
- Attempted a fix for client launching from pssetup on OSX.

*** 2008-02-17 by Andrew Craig
- Changed server to use psLinearMovement from the CEL class iPcLinearMovement.  

*** 2008-02-17 by Roland Schulz
- Fix for FS#1103 - Armor worn does not show due to faulty xml parsing, thanks Vornne.
- stop the pet from rotating in the pet stat window (to make it consistent with the
  character view) by Caarrie
- add quest prereq operator to check if a skill is in the given range

*** 2008-02-17 by Mike Gist
- Work on the banking window/popup and introduce popup by FayVanMering and Caarrie.
- Pushed CS revision to r28731 to get OSX sound fix.

*** 2008-02-17 by Anders Reggestad
- Fixed FX#868 - Moved some CON_SPAM into Debug LOG_NPC to remove spamming output from
  npc client

*** 2008-02-16 by Andrew Craig
- Added gemObject::GetEntityID() to replace gem->GetEntity()->GetID() calls. 
  This will limit some of the dependecy of items on the iCelEntity class. 
 
*** 2008-02-16 by Anders Reggestad
- Fixed so that NPCs created with the in game "/npc" command will be children
  of the master npc if the npc pointet to has a master npc. This so that stats
  and look will be copied correctrly from that npc at spawn. Included a sql
  script in the updater file to fix any npc in a db that dosn't have a 
  correct master npc. This is beleewed to fix some cases where where mobs
  looking the same seams to have different stats. 
  => DB VER BUMP!
- Fixed loading of items for npc's with master.

*** 2008-02-16 by Mike Gist
- A few updater changes to try and make sure everything is done on the VFS.
- Updater self-update improvements.

*** 2008-02-15 by Mike Gist
- Added check when banning so an npc can't be banned.

*** 2008-02-15 by Sasha Levin
- Fixed info window for NPCs and pets.
- Added support for ranged weapons. Test using the bow and arrow.
- Added support for rangeness for regular weapons. The claymore can hit
  further than the fists.
- DB VER BUMP!
- Added passing of weapon range to scripts.
- Fixed pushing of gem objects to unready clients.
- Softened up range checks for weapons.

*** 2008-02-14 by Dave Bentham
- Fixed bug FS#373 - book & map descriptions during pickups/drops & trades.

*** 2008-02-14 by Roland Schulz
- add tooltips showing the value of the coins to money.xml by Caarrie
- fix spelling mistake in adminmanager.cpp for frozen message

*** 2008-02-14 by Sasha Levin
- Changed the way freeze is handled on the server, Should prevent DR wars
  between server and client, and allow GMs to freeze players in mid air.

*** 2008-02-14 by Mike Gist
- Some pssetup fixes:
- Fixed default skin display.
- Fixed default window size display.
- Fixed a bug when saving skin.
- Fixed the problem with mouserun when selecting an object.
  Now mouserun won't start or change because of such a selection.
- Re-added ToggleRun to config window, looks like it was removed by accident.
- Improved movement controls so they don't conflict.
- Renamed *Run to *Move, as those controls aren't exclusive to run.
- Fixed typo in pssetup, fixes FS#1099.
- Fixed death causing unfreeze, FS#1097.
- Fixed FS#1038, you can't ban yourself now.

*** 2008-02-13 by Roland Schulz
- layout changes to bankwindow.xml by Caarrie. TODO: better background art
- minor layout changes to guildwindow.xml by Caarrie.
- and same for questnotebook.xml

*** 2008-02-13 by Sasha Levin
- Fixed crash on /say.

*** 2008-02-13 by Mike Gist
- Pushed CS and CEL revisions to 28657 and 3178 to get the last lot of fixes
  merged.

*** 2008-02-12 by Roland Schulz
- changes to compiling.html by Caarrie
- GM window layout and font changes also by Caarrie
- fixed FS#1075: recent change to csString::Clear resulted in
  GetData of string being NULL, which prevents making a std::string
  out of it in mathscript.cpp. TODO: make fparser.cpp use csString.
- same for psnetmanager.cpp (crash on client exit)

*** 2008-02-12 by Sasha Levin
- Changed bunch of code to use csString::IsEmpty and csString::Clear.

*** 2008-02-10 by Roland Schulz
- group and gm window background changes by ThomPhoenix

*** 2008-02-09 by Sasha Levin
- Added sorting to spell book window.

*** 2008-02-09 by Kenny Graunke
- Fixed pssetup bugs:
  - It wouldn't enable/disable sound.
  - It wrote invalid an screen depth and resolution when not provided default
    values in planeshift.cfg...which _aren't_ provided since we don't ship a
    default file anymore.  This made psclient fail to start.
- Fixed a bug where the spellbook would show the wrong glyphs - if a spell
  required more than two glyphs, the third and fourth would show the first's
  image.

*** 2008-02-09 by Sasha Levin
- Updater log file now uses VFS interface too.
- Fixed a couple of POD errors.
- Made log output windows friendly.
- GMs can attack anyone anywhere.

*** 2008-02-08 by Sasha Levin
- Fixed FS#1033 - Please change all instances of Planeshift to PlaneShift.
- Fix for paths.xml messed up at 800x600 by Caarrie.

*** 2008-02-07 by Mike Gist
- Updater fixes.

*** 2008-02-07 by Anders Reggestad
- Use same function to create new npc's from both adminmanager and entitymanager instad
  of having two function doing the same stuff.

*** 2008-02-06 by Sasha Levin
- Fixed a bug with /divorce only clearing the marriage status only for one of the parties.

*** 2008-02-06 by Anders Reggestad
- Moved code to check if its ok to attack someone around in order to make this function
  accessable from other parts of the server.

*** 2008-02-05 by Roland Schulz
- patch by Vornne to substitute appropriate GM_* defines for numerical constants
- fix for FS#1057 and FS#1058 by peeg
- group window changes by Caarrie
- fix for FS#1059 by Eriroley

*** 2008-02-05 by Anders Reggestad
- Fixed FS#1001 - Using a WeakRef for a pointer to prevent using of deleted object.

*** 2008-02-05 by Sasha Levin
- Fixed FS#914 - Mac users cant right click on the group window [lack of right click].

*** 2008-02-05 by Dave Bentham
- Fix bug FS#857: player can only read a book if they have it in their possession.
  Others just get the description, which is updated when the book gets written.

*** 2008-02-03 by Sasha Levin
- Commented out NPC introduction code, Everybody knows all NPCs at the moment.
- Everybody are introduced to a GM who's in a guild. So event GMs are still
  unintroduced.
- Minor fix for fonts not fitting by Caarrie.
- Fixed labels visible for non-introduced chars.
- Made GetActorByName case insensitive, Should solve a bunch of locating problems.
- Removed references to the Tournament Button from the code.

*** 2008-02-03 by Mike Gist
- Bumped CS revision to r28603, to get the many bug fixes recently merged.

*** 2008-02-02 by Anders Reggestad
- Added a recharge progression operation to recharge items.

*** 2008-02-02 by Roland Schulz
- added height to label font table
- introduce new font for labels
- paths window font changes by Caarrie
- make width of labels configurable
- more font changes by Caarrie
- remove frame in configkeys.xml, for some reason it was
  eating up the scrollbar

*** 2008-01-31 by Sasha Levin
- Fixed FS#1046 - Performance warning in networkmgr.cpp.

*** 2008-01-30 by Sasha Levin
- Fixed FS#689 - People can fly.
- Can't unstick if not falling.
- Fix for FS#955 - Provide more feedback of when in Edit Mode when making maps. By coreyo.
- Added collision detection option for items in GM item spawn, By coreyo.
- NETVER BUMP!

*** 2008-01-28 by Roland Schulz
- gui fixes by Caarrie and ThomPhoenix
- add gm flags to pawsGmGUIWindow so they can be displayed

*** 2008-01-27 by Thomas Towey
- Added craft group trasforms to craft books.
- Added crafting messages to allow better identification of data problems.
- Fixed problem where sometimes when items are comsumed by auto transformation container user is not notified.
- Fixed problem where garbage items are not considered in a pattern group.
- Added additional bonus quality points for craft steps with secondary skills.

*** 2008-01-27 by Anders Reggestad
- Added a recharge progression operation to recharge items.
- Added posibility to set filter for chats. Using the client number.
- Fixed npcclient printouts that path could not be found(FS#931) 

*** 2008-01-24 by Roland Schulz
- Fix for FS#840,790,787,247 and 834 by Vornne

*** 2008-01-24
- Fix for FS#971, FS#972 by peeg.

*** 2008-01-23 by Roland Schulz
- Even more GUI fixes by ThomPhoenix.
- And another small help fix

*** 2008-01-22 by Sasha Levin
- Moved stamina calculation script initialisation out of the message loop
  and into the constructor, should improve performance a bit.
- Fix for FS#1009-1011 and some gui color fixes by Caarrie.
- Fixed FS#1016.
- More GUI fixes by ThomPhoenix.

*** 2008-01-22 by Sasha Levin
- Added support for use of anti-magic in spell cast calculations.
- Fix for FS#987, FS#990, FS#992-FS#1000 by Caarrie.

*** 2008-01-22 by Anders Reggestad
- FS#946 fixed for allowing owner and owners group to loot a killed NPC.
 
*** 2008-01-21 by Roland Schulz
- FS#981-986 & 990 by Caarrie ... small gui changes
- fix FS#975 - Pets can attack impervious NPCs
- add check to let new characters skip the tutorial when another character
  in the account already finished it.

*** 2008-01-20 by Sasha Levin
- Fix for FS#957 by Caarrie.

*** 2008-01-20 by Roland Schulz
- add feature request FS#718, remaining ban time is now shown for /info.
  Thanks peeg.

*** 2008-01-20 by Anders Reggestad
- Added test to check if the last attacker on a target where a one of your
  pets to allow you to attack. This should fix FS#946.
- Made all variables private to the PlayerGroup class.
- Added access function GetGroupID to get the id.
- Fixed attack not working when PET is standing next to the target FS#944.

*** 2008-01-19 by Anders Reggestad
- Changed some of npcclient to use gemNPCObjects instead of iCelEntities
  basicaly because I needed the Instance that is saved in gemNPCObject.
- Added possiblity for user to define the name of the collision,
  out of bounds, and in bounds perceptions for chase.
- Added an chase_range that is a maximum distance a chase is allowed
  to chase before an "<type> out of chase" perception is given
  and the operation terminate.
- Watch operation will no give "<type> out of range" perception also
  when target/owner change instance.
- Modified an reaction to have delta, absoulte, guarantied and none as
  possible type of desire modifications.
- Added the possiblity for one reaction to target multiple behaviors.
  The react xml tag accept a ',' separated list of behaviors.
- Improved the preformance of the only_interrupt by spliting the list
  in the load, not every time the reaction is matched.
- Modified handling of /pet commands to only do them if the pet
  can here you. Inn same instance.
- Merged all the server side QeueuOwnerCmdXXXXPerception into one function
  with the pet command as the input.
- Fixes FS#779,

*** 2008-01-18 by Roland Schulz
- Interface patches FS#961, FS#828, thanks Caarrie
- transparency changes by Caarrie

*** 2008-01-18 by Anders Reggestad
- Added sending of instance in the all entity message to the npc client and
  actor perseption message.
  => NPC NET VERSION BUMPED!
  => NET VERSION BUMPED!
- Improved server command setlog <log> <flag> <filter> to match
  any unique substrings for the log argument. So now
  "setlog mes true" will enable log for LOG_MESSAGES.

*** 2008-01-17 by Anders Reggestad
- Fixed setting of charges when exchanging items.
- Save item when charges are changed.

*** 2008-01-16 by Sasha Levin
- Removed pointless calculation from pscamera.
- Another fix for FS#907 - Trying to consume as many items as possible
  instead of failing.

*** 2008-01-16 by Anders Reggestad
- Added charges to the item_instances and max_charges to the item_stats
  table. 
    => DB VERSION BUMPED!
  Added progression script operation <charge charges="#">script</charge>
  that will only run once for the item in question. To do this the
  progression manager where extended to now work on the actor, target, and an item.
  Item is given to the progression operations for equip and unequip and for attacks,
  so that should make it possible to create some interessting combinations. 
  This fixed BT#1271. Items now have the possibility for charges so the
  summon familiare script could be updated to use the new function
  to set number of charges to 1 for the ring of familiar and than
  only charge/run one time.

*** 2008-01-14 by Roland Schulz
- fix part of FS#778. Labels weren't updated in mouseover mode. 
- fix remaining items on FS#403 (hopefully).

*** 2008-01-13 by Roland Schulz
- gui fixes by Carrie (FS#643, FS#929, FS#930)

*** 2008-01-13 by Anders Reggestad
- Adding warning that npc's controlled by superclients can't be teleported (BT#1395)

*** 2008-01-12 by Anders Reggestad
- Added /path select command to select a path to add points.
- Modified /path point to add the point to the db if 
  path already in db.
- Changed default radius to use for /path admin commands to 2.0.
- Added dump of reactions for npcs, for easier debuging.
- Added group attribute to waypoints. This will allow to
  locate "waypoint:group:plaza" to locate an waypoint in
  the group. This is give the same function as the 
  location type did give, but when used on waypoints the 
  waypoint will be defined in the path network so less
  chanse of collision when using wander.
  => DB VERSION BUMPED!
- Changed formating of /path info output.
- Changed locate operation to have :name and :group subfunction 
  when locating waypoints. Updated npcbehave.xml to reflect this.

*** 2008-01-12 by Dave Bentham
- Improvements to the multiline edit text widget - particularly for book writing -
  including FS#453.

*** 2008-01-12 by Andrew Craig 
- Added Lanarel's patch for:
  FS#933 You cannot set a shortcut to the key it is already set to.

*** 2008-01-11 by Kenny Graunke
- Work on FS#928:
  - Fixed bug where min transparency was set equal to max by default.
  - Made default max transparency 50% instead of 78% in most windows; fixed
    some windows which had 0% max transparency by default.
- Fixed the chat window so it doesn't force the aspect ratio.  Admittedly the
  art looks better at the right ratio, but extra height can be very useful.

*** 2008-01-10 by Anders Reggestad
- Added optional instance parameter to teleport for destinaction here.
- Fixed update of proxy lists when teleporting between instances.

*** 2008-01-09 by Kenny Graunke
- Fix FS#907.

*** 2008-01-08 by Andrew Craig
- Move the Move() in the client InitMesh() to after it has finished 
  initializing more of the class. There were cases where Move would 
  end up calling things that have not yet been initialized.  
  Fixes: FS910
- Fixed some memory leaks with the pslinmovement class and 
  client GEM objects.  
  
*** 2008-01-08 by Sasha Levin
- Removed MSGTYPE_CHAR_INFO.
- NETVER BUMP.

*** 2008-01-08 by Mike Gist
- Made many fixes and enhancements to the update creation script and
  the updater.
- Pushed CS revision to r28424.

*** 2008-01-06 by Andrew Craig
- Fixed problem when loading chat bubble configuration file.  Now it 
  will load the default one if the userdata one is not found and create
  a copy into the /userdata/ folder.

*** 2008-01-06 by Anders Reggestad
- Cleand up the world_persist message that used same id and different
  content depending on sent to or from client. Added new
  PERSIST_WORLD_REQUEST message id. 
  => NET VER BUMPED!!
- Fixed a case where the pet didn't attack since there where no target
  for the attack command. Now the target for the pet is set to the
  last perseption if reacted to it.
- Moved some of the info printed in the npclist ncpcclient command
  to the print function.
- Changed some GetName functions to return const char* instead of a
  csString object to get rid of GetData function in
  some long debug print statements.

*** 2008-01-05 by Andrew Craig
- Fixed an issue when building a petition message list.  The message
 sizes where not calculated correctly can could crash the server
 by having invalid message.

*** 2008-01-05 by Mike Gist
- Pushed CS revision to r28403.
- Cleaned up vfs.cfg
- Some updater script fixes.
- Warning fixes.
- Added detection of executables and symlinks to fileutils.
- Made exec detection for changed files client side.
- Improvements to the updater self-update code.

*** 2008-01-04 by Andrew Craig
- Some more cleanups of CEL on the client. 

*** 2008-01-04 by Sasha Levin
- Fixed FS#782 - Taking items out of a locked container.
- Fixed FS#899 - laanx smiting people in the DR. Each sector now holds the name
  of the controlling god. Currently used just for the smiting, But should be used
  for more things.
- DB BUMP!

*** 2008-01-03 by Andrew Craig
- Added a psCelClient::FindNearbyEntities function that does the same
  work that is done in CEL.  Made various client managers use this 
  call instead of the one to CEL.
- Fixed some calls in the client zone handler and camera to be more OO and remove 
  direct CEL calls.   

*** 2008-01-03 by Dave Bentham
- GM4s registered into a GM Event can now assist the running of that event
  by being able to register & remove players and reward participants.

*** 2008-01-03 by Kenny Graunke
- Fix pawsObjectView scaling and restore original distances.
- Fixed the rest of FS#887: left/right hand slots now take up the full height
  as shown in the elves & default skins.
- Made pawsSlot draw icons correctly when the height is larger than the width.

*** 2008-01-02 by Kenny Graunke
- Fixed crash on client quit, incorrectly deleting psSoundManager.  Fixed the
  refcounting mistake which caused it not to be deleted in the first place.
- New group window GUI, more minimalistic and with race icons.
- pawsListBox now passes through clicks if not selectable.
- pawsMenu no longer adds title buttons when not supplied a label.

*** 2008-01-02 by Mike Gist
- Added keepaspect xml option.
- Improvements to the shortcut and yesno widgets with help from Caarrie.

*** 2008-01-01 by Anders Reggestad
- Changed run chase operation to work in npc coordinate space in same way
  that the advance function where changed before.
- Added ToString for TimePerception, other Perceptions need the same function
  for debuging.
- Modified npc print levels for npc client to be in
  range 1-5 for events not happening to frequent,
  6-10 for printing on advance and 11-15 for very detailed
  printings.

*** 2008-01-01 by Kenny Graunke
- Various valgrind cleanups.
- Remove old copy of fileutil from pslaunch...use the one from common/util.
- Fixed a bug where NPCs respawned without any HP regeneration.

*** 2008-01-01 by Mike Gist
- Made widgets inherit font from their parent.
- Improvements to infowindow and widgetconfigwindow.
- Enforced scaling so that the aspect ratio is preserved.
- Added option for font scaling to the widgetconfigwindow.
- Improved font scaling a little.
